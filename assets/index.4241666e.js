!function(){let e;function t(e){Object.defineProperty(e,"__esModule",{value:!0,configurable:!0})}function r(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}function o(e){return e&&e.__esModule?e.default:e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},s=a.parcelRequirec7f3;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},a.parcelRequirec7f3=s);var l=s.register;l("fkeW0",function(e,o){t(e.exports),r(e.exports,"default",function(){return M});var a=s("djimy"),n=s("djoOt"),i=s("1Ubyj"),l=s("bA8zD"),c=s("4I7K4"),u=s("2PnmE"),d=s("lbosM"),p=s("4TkLj"),m=s("2vvax"),f=s("1VbKL"),h=s("jrojO"),g=s("kIEuR"),y=s("5RKs2"),b=s("7Rjir"),S=s("flGFW"),_=s("7dQGn"),k=s("f4LB1"),x=s("i5N9G"),C=s("8C4qt"),P=s("6h466"),T=s("aDsGb"),E=s("9cXwb"),M=/*#__PURE__*/(0,a.defineComponent)({__name:"App",setup(e,{expose:t}){t();let r=(0,S.useOptionStore)(),{config:o}=(0,_.useConfigStore)(),s=(0,k.useAppStore)(),M=(0,x.useModelStore)(),I=new T.CircularEconomyModel,R=new P.ModelSimulator(I,{...o.model.initialStocks},{...o.model.initialParameters},0,o.simulation.deltaPerSecond,o.simulation.maxStepSize),O=new E.Runner;(0,a.watchEffect)(()=>{s.isPlaying?O.play():O.pause()}),(0,a.watchEffect)(()=>{Object.assign(R.parameters,{...M.transformedParameters}),console.log("Update model parameters",R.parameters)}),O.tick(),(0,a.watch)(()=>s.isFullscreen,e=>{console.log("Fullscreen toogled"),(0,C.ignorePromise)(e?document.documentElement.requestFullscreen():document.exitFullscreen())});let w=(0,a.ref)(!1),N=()=>{w.value=!w.value},B=()=>{s.isDeveloperModeActive=!s.isDeveloperModeActive},A=()=>{s.isPlaying=!s.isPlaying},D=()=>{s.isFullscreen=!s.isFullscreen},j=()=>{s.highlightDerivatives=!s.highlightDerivatives},V=M.reset;(0,n.onKeyStroke)(b.HOTKEYS.controlPanel.key,N),(0,n.onKeyStroke)(b.HOTKEYS.developerMode.key,B),(0,n.onKeyStroke)(b.HOTKEYS.run.key,A),(0,n.onKeyStroke)(b.HOTKEYS.fullscreen.key,D),(0,n.onKeyStroke)(b.HOTKEYS.highlightDerivatives.key,j),(0,n.onKeyStroke)(b.HOTKEYS.reset.key,V),(0,a.watchEffect)(()=>{s.isPlaying?O.play():O.pause()});let L=(0,a.ref)([]);(0,a.onMounted)(()=>{O.on("tick",e=>{/**
     * The current record from the model store can be externally modified,
     * e.g. through the reset function. To ensure that the simulator is in sync,
     * some properties are copied over from the model store to the simulator.
     *
     * TODO: Refactor the simulator such that is uses the global state directly
     *       to make syncing unnecessary.
     */let{parameters:t}=R.record;Object.assign(R.record,M.record,{parameters:t});let{t:r}=R.record;R.tick(e);let{t:o}=R.record,a=o-r,{record:n}=R;M.$patch({record:n}),L.value.forEach(t=>t.update(e,a,R.record))})});let F={options:r,config:o,appStore:s,modelStore:M,model:I,modelSimulator:R,runner:O,enableControlPanel:w,toggleControlPanel:N,toggleDeveloperMode:B,togglePlayPause:A,toggleFullscreen:D,toggleHighlightDerivatives:j,resetModel:V,modelVisualizations:L,ScaledLetterBox:i.default,PointerMarkerPanel:l.default,TuioMarkerPanel:c.default,ScoreTable:u.default,ControlPanel:d.default,ConditionalLayer:p.default,BasicSlotGroup:m.default,ActionCardSlotGroup:f.default,EventCardSlotGroup:h.default,ModelVisualization:g.default,ResetTimeoutOverlay:y.default,get BOARD_WIDTH(){return b.BOARD_WIDTH},get BOARD_HEIGHT(){return b.BOARD_HEIGHT}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}})}),l("1Ubyj",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("9WNvp")).__esModule&&(o=o.default),o.render=s("9QxH9").render,o.__cssModules={},s("f4glk").default(o),o.__scopeId="data-v-70f7f0",o.__file="ScaledLetterbox.vue";var a=o}),l("9WNvp",function(e,o){t(e.exports),r(e.exports,"default",function(){return i});var a=s("djimy"),n=s("hWymx"),i=/*#__PURE__*/(0,a.defineComponent)({__name:"ScaledLetterbox",props:{targetSize:{}},emits:["resize"],setup(e,{expose:t,emit:r}){t();let o=(0,a.ref)(null),i=(0,a.ref)(null),s=(0,a.ref)({translateX:0,translateY:0,scale:1});(0,a.onMounted)(()=>{(0,n.strict)(null!==o.value);let t=o.value,i=()=>{let o=t.getBoundingClientRect(),a=Math.min(o.width/e.targetSize.width,o.height/e.targetSize.height);s.value={translateX:o.width/2,translateY:o.height/2,scale:a},r("resize",a)},l=new ResizeObserver(i);l.observe(t),i(),(0,a.onUnmounted)(()=>l.disconnect())});let l={props:e,emit:r,outerElement:o,innerElement:i,transformInfo:s};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}})}),l("9QxH9",function(e,t){r(e.exports,"render",function(){return n});var o=s("djimy");let a={ref:"outerElement",class:"outer"};function n(e,t,r,n,i,s){return(0,o.openBlock)(),(0,o.createElementBlock)("div",a,[(0,o.createElementVNode)("div",{ref:"innerElement",class:"inner",style:(0,o.normalizeStyle)({"--target-width":n.props.targetSize.width,"--target-height":n.props.targetSize.height,"--translate-x":n.transformInfo.translateX,"--translate-y":n.transformInfo.translateY,"--scale":n.transformInfo.scale})},[(0,o.renderSlot)(e.$slots,"default")],4)],512)}}),l("f4glk",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("bA8zD",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("k9l3C")).__esModule&&(o=o.default),o.render=s("dWDNN").render,o.__cssModules={},s("hfCe3").default(o),o.__scopeId="data-v-f20b9f",o.__file="PointerMarkerPanel.vue";var a=o}),l("k9l3C",function(e,o){t(e.exports),r(e.exports,"default",function(){return p});var a=s("djimy"),n=s("hWymx"),i=s("9OMm5"),l=s("7Rjir"),c=s("dLTM2"),u=s("f4LB1"),d=s("02fmQ"),p=/*#__PURE__*/(0,a.defineComponent)({__name:"PointerMarkerPanel",setup(e,{expose:t}){t();let r=(0,u.useAppStore)(),{markerPositions:o,addMarker:a,moveMarker:s}=(0,d.useMarkerStore)(),p=(0,i.useArrayFilter)(o,({id:e})=>e.startsWith("pointer-marker-"));(0,l.POINTER_MARKER_COORDINATES).forEach(({x:e,y:t},r)=>a({id:`pointer-marker-${r}`,x:e,y:t}));let m=new Map,f={appStore:r,markerPositions:o,addMarker:a,moveMarker:s,pointerMarkers:p,offsets:m,onPointerDown:(e,t)=>{let{target:o}=e;(0,n.strict)(o instanceof HTMLElement),o.setPointerCapture(e.pointerId);let a={x:e.clientX/r.scale-t.x,y:e.clientY/r.scale-t.y};m.set(t.id,a)},onPointerMove:(e,t)=>{let{target:o}=e;if((0,n.strict)(o instanceof HTMLElement),!o.hasPointerCapture(e.pointerId))return;let a=m.get(t.id);(0,n.strict)(void 0!==a);// eslint-disable-next-line no-param-reassign
let i=e.clientX/r.scale-a.x,l=e.clientY/r.scale-a.y;s({id:t.id,x:i,y:l})},onPointerUpOrCancel:(e,t)=>{let{target:r}=e;(0,n.strict)(null!==r&&r instanceof HTMLElement),r.releasePointerCapture(e.pointerId)},MarkerUnderlay:c.default};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}})}),l("7Rjir",function(e,t){r(e.exports,"CONFIG_URLS",function(){return a}),r(e.exports,"CONFIG_INJECTION_KEY",function(){return n}),r(e.exports,"BOARD_WIDTH",function(){return i}),r(e.exports,"BOARD_HEIGHT",function(){return s}),r(e.exports,"MARKER_CIRCLE_DIAMETER",function(){return l}),r(e.exports,"NUM_POINTER_MARKERS",function(){return c}),r(e.exports,"POINTER_MARKER_COORDINATES",function(){return u}),r(e.exports,"SLOT_CIRCLE_DIAMETER",function(){return d}),r(e.exports,"HOTKEYS",function(){return p});let o=new URL("./config/",window.location.href),a=["general.yaml","model.yaml","simulation.yaml","parameter-transforms.yaml","interaction.yaml","layers.yaml"].map(e=>new URL(e,o)),n=Symbol("config injection key"),i=3840,s=2160,l=74.3*i/1209.6,c=8,u=Array(c).fill(0).map(()=>({x:188,y:1589})),d=l,p={run:{key:" ",label:"space"},controlPanel:{key:"c",label:"c"},developerMode:{key:"d",label:"d"},fullscreen:{key:"f",label:"f"},highlightDerivatives:{key:"h",label:"h"},reset:{key:"r",label:"r"}}}),l("dLTM2",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("kpnqw")).__esModule&&(o=o.default),o.render=s("awOVi").render,o.__cssModules={},s("cdnTT").default(o),o.__scopeId="data-v-9f6c2c",o.__file="MarkerUnderlay.vue";var a=o}),l("kpnqw",function(e,o){t(e.exports),r(e.exports,"default",function(){return l});var a=s("djimy"),n=s("7Rjir"),i=s("f4LB1"),l=/*#__PURE__*/(0,a.defineComponent)({__name:"MarkerUnderlay",props:{markerId:{},x:{},y:{}},setup(e,{expose:t}){t();let r=(0,i.useAppStore)(),o={appStore:r,props:e,get MARKER_CIRCLE_DIAMETER(){return n.MARKER_CIRCLE_DIAMETER}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}})}),l("f4LB1",function(e,t){r(e.exports,"useAppStore",function(){return i});var o=s("kV0Ly"),a=s("djimy"),n=s("flGFW");let i=(0,o.defineStore)("app",()=>{let e=(0,n.useOptionStore)(),t=(0,a.ref)(e.autoStart),r=(0,a.ref)(!1),o=(0,a.ref)(e.developerMode),i=(0,a.ref)(e.highlightDerivatives),s=(0,a.ref)(e.markerSlotLabels),l=(0,a.ref)(e.autoReset),c=(0,a.ref)(1);return{isPlaying:t,isFullscreen:r,isDeveloperModeActive:o,highlightDerivatives:i,showMarkerSlotLabels:s,autoReset:l,scale:c}})}),l("flGFW",function(e,t){r(e.exports,"useOptionStore",function(){return n});var o=s("kV0Ly"),a=s("7Rjir");let n=(0,o.defineStore)("options",()=>{let e=new URLSearchParams(window.location.search),t=(e.get("tuio")??"true")==="true",r=(e.get("pointer")??"false")==="true",o=Number.parseInt(e.get("numPointerMarkers")??`${a.NUM_POINTER_MARKERS}`,10),n=e.get("tuioUrl")??"ws://localhost:3339",i=1e3*Number.parseInt(e.get("tuioReconnectionDelay")??"10",10),s=(e.get("autoStart")??"true")==="true",l=(e.get("devMode")??"false")==="true",c=(e.get("highlightDerivatives")??"true")==="true",u=(e.get("markerSlotLabels")??"true")==="true",d=(e.get("autoReset")??"true")==="true";return{useTuioMarkers:t,usePointerMarkers:r,numPointerMarkers:o,tuioUrl:n,tuioReconnectionDelayMs:i,autoStart:s,developerMode:l,highlightDerivatives:c,markerSlotLabels:u,autoReset:d}})}),l("awOVi",function(e,t){r(e.exports,"render",function(){return l});var o,a=s("djimy");let n=(o=()=>/*#__PURE__*/(0,a.createElementVNode)("div",{class:"circle"},null,-1),(0,a.pushScopeId)("data-v-9f6c2c"),o=o(),(0,a.popScopeId)(),o),i={key:0};function l(e,t,r,o,s,l){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"marker",style:(0,a.normalizeStyle)({"--marker-position-x":o.props.x,"--marker-position-y":o.props.y,"--marker-diameter":o.MARKER_CIRCLE_DIAMETER})},[n,o.appStore.isDeveloperModeActive?((0,a.openBlock)(),(0,a.createElementBlock)("span",i,(0,a.toDisplayString)(o.props.markerId),1)):(0,a.createCommentVNode)("",!0)],4)}}),l("cdnTT",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("02fmQ",function(e,t){r(e.exports,"useMarkerStore",function(){return d});var o=s("kV0Ly"),a=s("djimy"),n=s("7Rjir"),i=s("flGFW"),l=s("46h5Q");s("h1KQv");var c=s("4Bz8r"),u=s("le1Q3");let d=(0,o.defineStore)("marker",()=>{let e=(0,i.useOptionStore)(),t=(0,a.ref)([]),r=e=>{let r=-1;do -1!==(r=t.value.findIndex(({id:t})=>t===e.id))&&t.value.splice(r,1);while(-1!==r)},o=e=>{r(e),t.value.push({...e})},s=e=>{let r=t.value.find(({id:t})=>t===e.id);if(void 0===r){o(e);return}r.x=e.x,r.y=e.y},d=new l.Tuio11EventEmitter;if(e.useTuioMarkers){let t=new c.Tuio11Client(new u.WebsocketTuioReceiverExt(e.tuioUrl,e.tuioReconnectionDelayMs));t.addTuioListener(d),/*
     * FIXME:
     *   This is a workaround to not miss the initial marker events that are emitted directly after the connection is
     *   established.
     */setTimeout(()=>t.connect(),0)}return d.on("tuio-object-add",e=>{o({id:`tuio-${e.sessionId}`,x:e.xPos*n.BOARD_WIDTH,y:e.yPos*n.BOARD_HEIGHT})}),d.on("tuio-object-update",e=>{s({id:`tuio-${e.sessionId}`,x:e.xPos*n.BOARD_WIDTH,y:e.yPos*n.BOARD_HEIGHT})}),d.on("tuio-object-remove",e=>{r({id:`tuio-${e.sessionId}`,x:e.xPos*n.BOARD_WIDTH,y:e.yPos*n.BOARD_HEIGHT})}),{markerPositions:(0,a.readonly)(t),removeMarker:r,addMarker:o,moveMarker:s}})}),l("46h5Q",function(e,t){r(e.exports,"Tuio11EventEmitter",function(){return a});var o=s("3ZGF0");class a extends o.EventEmitter{addTuioObject(e){this.emit("tuio-object-add",e)}updateTuioObject(e){this.emit("tuio-object-update",e)}removeTuioObject(e){this.emit("tuio-object-remove",e)}addTuioCursor(e){this.emit("tuio-cursor-add",e)}updateTuioCursor(e){this.emit("tuio-cursor-update",e)}removeTuioCursor(e){this.emit("tuio-cursor-remove",e)}addTuioBlob(e){this.emit("tuio-blob-add",e)}updateTuioBlob(e){this.emit("tuio-blob-update",e)}removeTuioBlob(e){this.emit("tuio-blob-remove",e)}refresh(e){this.emit("refresh",e)}}}),l("h1KQv",function(e,t){r(e.exports,"Tuio11Client",function(){return s("4Bz8r").Tuio11Client}),s("7oQXN"),s("4Bz8r")}),l("7oQXN",function(e,t){r(e.exports,"TuioReceiver",function(){return s("bNthR").TuioReceiver}),r(e.exports,"Tuio11Client",function(){return s("4Bz8r").Tuio11Client}),s("aepZW"),s("bNthR"),s("2SMZK"),s("bSOPx"),s("4IIOm"),s("2Cyxe"),s("4Bz8r"),s("cmRMF"),s("02co9"),s("b3X4E"),s("1lgn3");/* Exclude TUIO 2.0 code for now
// TUIO 2.0 code
import { Tuio20Bounds } from './tuio20/Tuio20Bounds.js';
import { Tuio20Client } from './tuio20/Tuio20Client.js';
import { Tuio20Component } from './tuio20/Tuio20Component.js';
import { Tuio20Object } from './tuio20/Tuio20Object.js';
import { Tuio20Point } from './tuio20/Tuio20Point.js';
import { Tuio20Pointer } from './tuio20/Tuio20Pointer.js';
import { Tuio20Symbol } from './tuio20/Tuio20Symbol.js';
import { Tuio20Token } from './tuio20/Tuio20Token.js';

export {
  Tuio20Bounds,
  Tuio20Client,
  Tuio20Component,
  Tuio20Object,
  Tuio20Point,
  Tuio20Pointer,
  Tuio20Symbol,
  Tuio20Token,
};
*/}),l("aepZW",function(e,t){class r{static UDP=new r("UDP");static Websocket=new r("Websocket");constructor(e){this.name=e}toString(){return`TuioConnectionType.${this.name}`}}}),l("bNthR",function(e,t){r(e.exports,"TuioReceiver",function(){return o});class o{constructor(){this._isConnected=!1,this._messageListeners={}}connect(){}disconnect(){}onOscMessage(e){let t=this._messageListeners[e.address];if(void 0!==t)for(let r of t)r(e)}addMessageListener(e,t){e in this._messageListeners||(this._messageListeners[e]=[]),this._messageListeners[e].push(t)}}}),l("2SMZK",function(e,t){r(e.exports,"TuioState",function(){return o});class o{static Added=new o("Added");static Accelerating=new o("Accelerating");static Decelerating=new o("Decelerating");static Stopped=new o("Stopped");static Removed=new o("Removed");static Rotating=new o("Rotating");static Idle=new o("Idle");constructor(e){this.name=e}toString(){return`TuioState.${this.name}`}}}),l("bSOPx",function(e,t){r(e.exports,"TuioTime",function(){return o});class o{static _startTime=new o(0,0);constructor(e,t){this._seconds=e,this._microSeconds=t}static fromOscTime(e){return new o(e.raw[0],e.raw[1]/4294967296)}subtract(e){let t=this._seconds-e._seconds,r=this._microSeconds-e._microSeconds;return r<0&&(r+=1e6,t-=1),new o(t,r)}getTotalMilliseconds(){return 1e3*this._seconds+this._microSeconds/1e3}static init(){o._startTime=o._getSystemTime()}static _getSystemTime(){let e=performance.now();return new o(Math.floor(e/1e3),Math.floor(1e3*e)%1e6)}static getCurrentTime(){return o._getSystemTime().subtract(o._startTime)}}}),l("4IIOm",function(e,t){s("9iGn8"),s("bNthR")}),l("2Cyxe",function(e,t){r(e.exports,"Tuio11Blob",function(){return n});var o=s("cmRMF"),a=s("2SMZK");class n extends o.Tuio11Container{constructor(e,t,r,o,a,n,i,s,l,c,u,d,p,m){super(e,t,o,a,c,u,p),this._blobId=t,this._angle=n,this._width=i,this._height=s,this._area=l,this._rotationSpeed=d,this._rotationAccel=m}get blobId(){return this._blobId}get angle(){return this._angle}get width(){return this._angle}get height(){return this._angle}get area(){return this._angle}get rotationSpeed(){return this._rotationSpeed}get rotationAccel(){return this._rotationAccel}_hasChanged(e,t,r,o,a,n,i,s,l,c,u,d){return!(t===this.xPos&&r===this.yPos&&o===this.angle&&a===this.width&&n===this.height&&i===this.area&&s===this.xSpeed&&l===this.ySpeed&&c===this.rotationSpeed&&u===this.motionAccel&&d===this.rotationAccel)}_update(e,t,r,o,n,i,s,l,c,u,d,p){let m=this.path[this.path.length-1],f=t!==this.xPos&&0===l||r!==this.yPos&&0===c;if(this._updateContainer(e,t,r,l,c,d,f),o!==this.angle&&0===u){let t=e.subtract(m.startTime).getTotalMilliseconds()/1e3,r=this.angle,a=this.rotationSpeed,n=(o-r)/(2*Math.PI);n>.5?n-=1:n<=-.5&&(n+=1),this._rotationSpeed=n/t,this._rotationAccel=(this.rotationSpeed-a)/t}else this._rotationSpeed=u,this._rotationAccel=p;this._angle=o,this._state!==a.TuioState.Stopped&&0!==this.rotationAccel&&(this._state=a.TuioState.Rotating),this._width=n,this._height=i,this._area=s}}}),l("cmRMF",function(e,t){r(e.exports,"Tuio11Container",function(){return n});var o=s("1lgn3"),a=s("2SMZK");class n extends o.Tuio11Point{MAX_PATH_LENGTH=128;constructor(e,t,r,n,i,s,l){super(e,r,n),this._currentTime=e,this._sessionId=t,this._xSpeed=i,this._ySpeed=s,this._motionSpeed=Math.sqrt(i*i+s*s),this._motionAccel=l,this._state=a.TuioState.Added,this._prevPoints=[],this._prevPoints.push(new o.Tuio11Point(e,r,n))}get currentTime(){return this._currentTime}get sessionId(){return this._sessionId}get xSpeed(){return this._xSpeed}get ySpeed(){return this._ySpeed}get motionSpeed(){return this._motionSpeed}get motionAccel(){return this._motionAccel}get state(){return this._state}get path(){return this._prevPoints}_updateContainer(e,t,r,n,i,s,l){let c=this.path[this.path.length-1];if(this._xPos=t,this._yPos=r,l){let t=e.subtract(c.startTime).getTotalMilliseconds()/1e3,r=this.xPos-c.xPos,o=this.yPos-c.yPos,a=this.motionSpeed;this._xSpeed=r/t,this._ySpeed=o/t,this._motionSpeed=Math.sqrt(r*r+o*o)/t,this._motionAccel=(this.motionSpeed-a)/t}else this._xSpeed=n,this._ySpeed=i,this._motionSpeed=Math.sqrt(n*n+i*i),this._motionAccel=s;this._currentTime=e,this._prevPoints.push(new o.Tuio11Point(e,t,r)),this._prevPoints.length>this.MAX_PATH_LENGTH&&this._prevPoints.shift(),this._motionAccel>0?this._state=a.TuioState.Accelerating:this._motionAccel<0?this._state=a.TuioState.Decelerating:this._state=a.TuioState.Stopped}_remove(e){this._currentTime=e,this._state=a.TuioState.Removed}}}),l("1lgn3",function(e,t){r(e.exports,"Tuio11Point",function(){return o});class o{constructor(e,t,r){this._startTime=e,this._xPos=t,this._yPos=r}get startTime(){return this._startTime}get xPos(){return this._xPos}get yPos(){return this._yPos}}}),l("4Bz8r",function(e,t){r(e.exports,"Tuio11Client",function(){return l});var o=s("b3X4E"),a=s("02co9"),n=s("2Cyxe"),i=s("bSOPx");class l{constructor(e){this._tuioReceiver=e,this._tuioReceiver.addMessageListener("/tuio/2Dobj",this._on2Dobj.bind(this)),this._tuioReceiver.addMessageListener("/tuio/2Dcur",this._on2Dcur.bind(this)),this._tuioReceiver.addMessageListener("/tuio/2Dblb",this._on2Dblb.bind(this)),this._tuioListeners=[],this._tuioObjects=new Map,this._tuioCursors=new Map,this._tuioBlobs=new Map,this._objectSetMessages=[],this._cursorSetMessages=[],this._blobSetMessages=[],this._objectAliveMessage=null,this._cursorAliveMessage=null,this._blobAliveMessage=null,this._freeCursorIds=[],this._freeBlobIds=[],this._currentFrame=0,this._currentTime=null}connect(){(0,i.TuioTime).init(),this._currentTime=(0,i.TuioTime).getCurrentTime(),this._tuioReceiver.connect()}disconnect(){this._tuioReceiver.disconnect()}addTuioListener(e){this._tuioListeners.push(e)}removeTuioListener(e){let t=this._tuioListeners.indexOf(e);t>-1&&this._tuioListeners.splice(t,1)}removeAllTuioListeners(){this._tuioListeners=[]}getTuioObjects(){return this._tuioObjects.values()}getTuioCursors(){return this._tuioCursors.values()}getTuioBlobs(){return this._tuioBlobs.values()}getTuioObject(e){let t=this._tuioObjects.get(e);return void 0===t?null:t}getTuioCursor(e){let t=this._tuioCursors.get(e);return void 0===t?null:t}getTuioBlob(e){let t=this._tuioBlobs.get(e);return void 0===t?null:t}_updateFrame(e){let t=(0,i.TuioTime).getCurrentTime();if(e>0){if(e>this._currentFrame&&(this._currentTime=t),!(e>=this._currentFrame)&&!(this._currentFrame-e>100))return!1;this._currentFrame=e}else t.subtract(this._currentTime).getTotalMilliseconds()>100&&(this._currentTime=t);return!0}_on2Dobj(e){let t=e.args[0].value;if("set"===t)this._objectSetMessages.push(e);else if("alive"===t)this._objectAliveMessage=e;else if("fseq"===t){let t=e.args[1].value;if(this._updateFrame(t)){if(null!==this._objectAliveMessage){let e=new Set(this._tuioObjects.keys()),t=new Set(this._objectAliveMessage.args.slice(1).map(e=>e.value));for(let r of new Set([...e].filter(e=>!t.has(e)))){let e=this._tuioObjects.get(r);for(let t of(e._remove(this._currentTime),this._tuioListeners))t.removeTuioObject(e);this._tuioObjects.delete(r)}for(let r of this._objectSetMessages){let[,a,n,i,s,l,c,u,d,p,m]=r.args.map(e=>e.value);if(t.has(a)){if(e.has(a)){let e=this._tuioObjects.get(a);if(e._hasChanged(this._currentTime,i,s,l,c,u,d,p,m))for(let t of(e._update(this._currentTime,i,s,l,c,u,d,p,m),this._tuioListeners))t.updateTuioObject(e)}else{let e=new o.Tuio11Object(this._currentTime,a,n,i,s,l,c,u,d,p,m);for(let t of(this._tuioObjects.set(a,e),this._tuioListeners))t.addTuioObject(e)}}}for(let e of this._tuioListeners)e.refresh(this._currentTime)}this._objectSetMessages=[],this._objectAliveMessage=null}}}_on2Dcur(e){let t=e.args[0].value;if("set"===t)this._cursorSetMessages.push(e);else if("alive"===t)this._cursorAliveMessage=e;else if("fseq"===t){let t=e.args[1].value;if(this._updateFrame(t)){if(null!==this._cursorAliveMessage){let e=new Set(this._tuioCursors.keys()),t=new Set(this._cursorAliveMessage.args.slice(1).map(e=>e.value));for(let r of new Set([...e].filter(e=>!t.has(e)))){let e=this._tuioCursors.get(r);for(let t of(e._remove(this._currentTime),this._tuioListeners))t.removeTuioCursor(e);this._tuioCursors.delete(r),this._freeCursorIds.push(e.cursorId)}for(let r of(this._freeCursorIds.sort(),this._cursorSetMessages)){let[,o,n,i,s,l,c]=r.args.map(e=>e.value);if(t.has(o)){if(e.has(o)){let e=this._tuioCursors.get(o);if(e._hasChanged(this._currentTime,n,i,s,l,c))for(let t of(e._update(this._currentTime,n,i,s,l,c),this._tuioListeners))t.updateTuioCursor(e)}else{let e=this._tuioCursors.size;this._freeCursorIds.length>0&&(e=this._freeCursorIds[0],this._freeCursorIds.splice(0,1));let t=new a.Tuio11Cursor(this._currentTime,o,e,n,i,s,l,c);for(let e of(this._tuioCursors.set(o,t),this._tuioListeners))e.addTuioCursor(t)}}}for(let e of this._tuioListeners)e.refresh(this._currentTime)}this._cursorSetMessages=[],this._cursorAliveMessage=null}}}_on2Dblb(e){let t=e.args[0].value;if("set"===t)this._blobSetMessages.push(e);else if("alive"===t)this._blobAliveMessage=e;else if("fseq"===t){let t=e.args[1].value;if(this._updateFrame(t)){if(null!==this._blobAliveMessage){let e=new Set(this._tuioBlobs.keys()),t=new Set(this._blobAliveMessage.args.slice(1).map(e=>e.value));for(let r of new Set([...e].filter(e=>!t.has(e)))){let e=this._tuioBlobs.get(r);for(let t of(e._remove(this._currentTime),this._tuioListeners))t.removeTuioBlob(e);this._tuioBlobs.delete(r),this._freeBlobIds.push(e.blobId)}for(let r of(this._freeBlobIds.sort(),this._blobSetMessages)){let[,o,a,i,s,l,c,u,d,p,m,f,h]=r.args.map(e=>e.value);if(t.has(o)){if(e.has(o)){let e=this._tuioBlobs.get(o);if(e._hasChanged(this._currentTime,a,i,s,l,c,u,d,p,m,f,h))for(let t of(e._update(this._currentTime,a,i,s,l,c,u,d,p,m,f,h),this._tuioListeners))t.updateTuioBlob(e)}else{let e=this._tuioBlobs.size;this._freeBlobIds.length>0&&(e=this._freeBlobIds[0],this._freeBlobIds.splice(0,1));let t=new n.Tuio11Blob(this._currentTime,o,e,a,i,s,l,c,u,d,p,m,f,h);for(let e of(this._tuioBlobs.set(o,t),this._tuioListeners))e.addTuioBlob(t)}}}for(let e of this._tuioListeners)e.refresh(this._currentTime)}this._blobSetMessages=[],this._blobAliveMessage=null}}}}}),l("b3X4E",function(e,t){r(e.exports,"Tuio11Object",function(){return n});var o=s("cmRMF"),a=s("2SMZK");class n extends o.Tuio11Container{constructor(e,t,r,o,a,n,i,s,l,c,u){super(e,t,o,a,i,s,c),this._symbolId=r,this._angle=n,this._rotationSpeed=l,this._rotationAccel=u}get symbolId(){return this._symbolId}get angle(){return this._angle}get rotationSpeed(){return this._rotationSpeed}get rotationAccel(){return this._rotationAccel}_hasChanged(e,t,r,o,a,n,i,s,l){return!(t===this.xPos&&r===this.yPos&&o===this.angle&&a===this.xSpeed&&n===this.ySpeed&&i===this.rotationSpeed&&s===this.motionAccel&&l===this.rotationAccel)}_update(e,t,r,o,n,i,s,l,c){let u=this.path[this.path.length-1],d=t!==this.xPos&&0===n||r!==this.yPos&&0===i;if(this._updateContainer(e,t,r,n,i,l,d),o!==this.angle&&0===s){let t=e.subtract(u.startTime).getTotalMilliseconds()/1e3,r=this.angle,a=this.rotationSpeed,n=(o-r)/(2*Math.PI);n>.5?n-=1:n<=-.5&&(n+=1),this._rotationSpeed=n/t,this._rotationAccel=(this.rotationSpeed-a)/t}else this._rotationSpeed=s,this._rotationAccel=c;this._angle=o,this._state!==a.TuioState.Stopped&&0!==this.rotationAccel&&(this._state=a.TuioState.Rotating)}}}),l("02co9",function(e,t){r(e.exports,"Tuio11Cursor",function(){return a});var o=s("cmRMF");class a extends o.Tuio11Container{constructor(e,t,r,o,a,n,i,s){super(e,t,o,a,n,i,s),this._cursorId=r}get cursorId(){return this._cursorId}_hasChanged(e,t,r,o,a,n){return!(t===this.xPos&&r===this.yPos&&o===this.xSpeed&&a===this.ySpeed&&n===this.motionAccel)}_update(e,t,r,o,a,n){let i=t!==this.xPos&&0===o||r!==this.yPos&&0===a;this._updateContainer(e,t,r,o,a,n,i)}}}),l("le1Q3",function(e,t){r(e.exports,"WebsocketTuioReceiverExt",function(){return n});var o=s("9iGn8");s("7oQXN");var a=s("bNthR");class n extends a.TuioReceiver{constructor(e,t){super(),this._isConnected=!1,this._url=e,this._reconnectIntervalMs=t,this._oscPort=new o.WebSocketPort({url:e,metadata:!0}),this._reconnectTimeout=0,this._handleOscMessage=this.onOscMessage.bind(this),this._handleOscReady=this.onOscReady.bind(this),this._handleOscClose=this.onOscClose.bind(this),this._handleOscError=this.onOscError.bind(this)}scheduleReconnect(){this.disconnect(),console.warn(`Attempting reconnection in ${this._reconnectIntervalMs}ms`),clearTimeout(this._reconnectTimeout),this._reconnectTimeout=setTimeout(()=>this.connect(),this._reconnectIntervalMs)}onOscReady(){this._isConnected=!0,this._oscPort.on("message",this._handleOscMessage),console.log(`TUIO connection to ${this._url} established`)}onOscClose(e){console.warn(`TUIO connection to ${this._url} closed`,e),this.scheduleReconnect()}onOscError(e){console.error("TUIO error: ",e),console.warn(`Terminating TUIO connection ${this._url}`),this.scheduleReconnect()}connect(){console.log(`Connecting to TUIO server ${this._url}`),this._oscPort.once("ready",this._handleOscReady),this._oscPort.once("close",this._handleOscClose),this._oscPort.once("error",this._handleOscError),this._oscPort.once("wsClient",this._handleOscError),this._oscPort.open()}disconnect(){this._oscPort.off("ready",this._handleOscReady),this._oscPort.off("message",this._handleOscMessage),this._oscPort.off("close",this._handleOscClose),this._oscPort.off("error",this._handleOscError),this._oscPort.off("wsClient",this._handleOscError),this._oscPort.close(),this._isConnected=!1}}}),l("dWDNN",function(e,t){r(e.exports,"render",function(){return n});var o=s("djimy");let a={class:"abs-top-left"};function n(e,t,r,n,i,s){return(0,o.openBlock)(),(0,o.createElementBlock)("div",a,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(n.pointerMarkers,e=>((0,o.openBlock)(),(0,o.createBlock)(n.MarkerUnderlay,{key:e.id,"marker-id":e.id,x:e.x,y:e.y,class:"marker-underlay",onPointerdown:t=>n.onPointerDown(t,e),onPointermove:t=>n.onPointerMove(t,e),onPointerup:t=>n.onPointerUpOrCancel(t,e),onPointercancel:t=>n.onPointerUpOrCancel(t,e)},null,8,["marker-id","x","y","onPointerdown","onPointermove","onPointerup","onPointercancel"]))),128))])}}),l("hfCe3",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("4I7K4",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("RDxjP")).__esModule&&(o=o.default),o.render=s("4bJi3").render,s("4OgPE").default(o),o.__scopeId="data-v-18be12",o.__file="TuioMarkerPanel.vue";var a=o}),l("RDxjP",function(e,o){t(e.exports),r(e.exports,"default",function(){return c});var a=s("djimy"),n=s("9OMm5"),i=s("dLTM2"),l=s("02fmQ"),c=/*#__PURE__*/(0,a.defineComponent)({__name:"TuioMarkerPanel",setup(e,{expose:t}){t();let{markerPositions:r}=(0,l.useMarkerStore)(),o=(0,n.useArrayFilter)(r,({id:e})=>e.startsWith("tuio-")),a={markerPositions:r,tuioMarkers:o,MarkerUnderlay:i.default};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}})}),l("4bJi3",function(e,t){r(e.exports,"render",function(){return n});var o=s("djimy");let a={ref:"container",class:"abs-top-left"};function n(e,t,r,n,i,s){return(0,o.openBlock)(),(0,o.createElementBlock)("div",a,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(n.tuioMarkers,e=>((0,o.openBlock)(),(0,o.createBlock)(n.MarkerUnderlay,{key:e.id,"marker-id":e.id,x:e.x,y:e.y},null,8,["marker-id","x","y"]))),128))],512)}}),l("4OgPE",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("2PnmE",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("lvc51")).__esModule&&(o=o.default),o.render=s("d3Cdr").render,o.__cssModules={},s("eATDO").default(o),o.__scopeId="data-v-c07580",o.__file="ScoreTable.vue";var a=o}),l("lvc51",function(e,o){t(e.exports),r(e.exports,"default",function(){return c});var a=s("djimy"),n=s("7dQGn"),i=s("i5N9G"),l=s("dNJei"),c=/*#__PURE__*/(0,a.defineComponent)({__name:"ScoreTable",setup(e,{expose:t}){t();let{config:{general:r},getPrimary:o,getSecondary:s}=(0,n.useConfigStore)(),{description:c,scoreLabels:u}=r,d=(0,i.useModelStore)(),p=["circularity","coverage"];function m(e){return{id:e,score:(0,a.computed)(()=>(0,l.Scores)[e](d.record)),primaryLabel:o(u[e]),secondaryLabel:s(u[e])}}let f=p.map(m),h=`\u{2013}.${"".padEnd(1,"–")}`,g={general:r,getPrimary:o,getSecondary:s,description:c,scoreLabels:u,modelStore:d,scoreIds:p,createScoreInfo:m,scores:f,fractionDigits:1,nanScoreText:h,format:e=>Number.isFinite(e)?`${(100*e).toFixed(1)}%`:e===Number.POSITIVE_INFINITY?`\u{221E}%`:e===Number.NEGATIVE_INFINITY?`\u{2212}\u{221E}%`:`${h}%`};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}})}),l("7dQGn",function(e,t){r(e.exports,"useConfigStore",function(){return l});var o=s("hWymx"),a=s("kV0Ly"),n=s("djimy"),i=s("7Rjir");let l=(0,a.defineStore)("config",()=>{let e=(0,n.inject)(i.CONFIG_INJECTION_KEY,null);(0,o.strict)(e);let{general:{assetBaseDir:t}}=e,r=new URL(`${t}/`,window.location.href),a=/_x([+-]?[0-9]+)_y([+-]?[0-9]+)\.[a-zA-Z0-9]+$/,s=e=>{if("string"!=typeof e)return s(e.href);let t=e.match(a);if(null===t||3!==t.length)return{x:0,y:0};let r=Number.parseInt(t[1],10),o=Number.parseInt(t[2],10);return{x:r,y:o}},l=(e,t)=>"string"==typeof e[t]?e[t]:"<undefined>";return{config:e,assetBaseUrl:r,toAssetUrl:e=>new URL(e,r),extractAssetPosition:s,getPrimary:t=>(0,n.computed)(()=>l(t,e.general.primaryLanguage)),getSecondary:t=>(0,n.computed)(()=>l(t,e.general.secondaryLanguage))}})}),l("i5N9G",function(e,t){r(e.exports,"useModelStore",function(){return m});var o=s("hWymx"),a=s("kV0Ly"),n=s("djimy"),i=s("9OMm5"),l=s("aDsGb"),c=s("7dQGn"),u=s("5rTuK"),d=s("cIjax");let p=e=>{let t=(0,d.useSlotGroupsStore)(),r=(0,u.useParameterTransformsStore)(),{slotGroups:a}=t,{parameterTransforms:n}=r,s=(0,i.reactiveComputed)(()=>{let t={...e.value},r=a.map(({id:e,parameterTransforms:r})=>{let a=r.map(({id:e,active:r})=>{let a=n.find(t=>t.id===e);(0,o.strict)(a,`No transform found for id ${e}`);let{script:i,transform:s}=a,l=r?s({...t}):{...t},c=Object.fromEntries(Object.entries(l).filter(([e,r])=>r!==t[e])),u={id:e,script:i,active:r,before:t,after:l,diff:c};return t={...l},u});return{id:e,steps:a}});return r}),l=(0,i.reactiveComputed)(()=>{let t=(e,t)=>e.length>0?e[e.length-1]:t,r=t(s.map(({steps:r})=>t(r.map(({after:e})=>e),e.value)),e.value);return r});return{transformedParametersExt:s,transformedParameters:l}},m=(0,a.defineStore)("model",()=>{let{config:{model:e}}=(0,c.useConfigStore)(),t=new(0,l.CircularEconomyModel)().evaluate((0,n.toRaw)(e.initialStocks),(0,n.toRaw)(e.initialParameters),0);console.log(t);let r=(0,n.ref)(structuredClone(t)),o=(0,n.ref)({...e.initialParameters}),{transformedParameters:a,transformedParametersExt:i}=p(o);return{record:r,initialParameters:o,transformedParameters:a,transformedParametersExt:i,reset:()=>{r.value=structuredClone(t)}}})}),l("aDsGb",function(e,t){r(e.exports,"stockIds",function(){return a}),r(e.exports,"flowIds",function(){return n}),r(e.exports,"variableIds",function(){return i}),r(e.exports,"parameterIds",function(){return l}),r(e.exports,"CircularEconomyModel",function(){return c});// This file was auto-generated from the InsightMaker model. Do not edit it manually.
var o=s("jRMUH");let a=["capacityOfNaturalResources","capacityOfNewlyProducedPhones","capacityOfPhonesInUse","capacityOfRecycledMaterials","capacityOfRefurbishedPhones","capacityOfRepairedPhones","phonesInUse","supplyOfBrokenPhones","supplyOfDisposedPhones","supplyOfHibernatingPhones","supplyOfNaturalResources","supplyOfNewlyProducedPhones","supplyOfRecycledMaterials","supplyOfRefurbishedPhones","supplyOfRepairedPhones"],n=["abandon","acquireNewlyProduced","acquireRefurbished","acquireRepaired","acquireUsed","capacityOfNaturalResourcesAdjustment","capacityOfNewlyProducedPhonesAdjustment","capacityOfPhonesInUseAdjustment","capacityOfRecycledMaterialsAdjustment","capacityOfRefurbishedPhonesAdjustment","disposeBroken","disposeHibernating","goBroken","landfill","mineNaturalResources","produceFromNaturalResources","produceFromRecycledMaterials","recycle","refurbish","repair","repairShopCapcityAdjustment"],i=["demandForMining","demandForNaturalResources","demandForNewlyProducedPhones","demandForPhones","demandForRecycledMaterials","demandForRecycling","demandForRefurbishedPhones","demandForRefurbishment","demandForRepair","demandForRepairedPhones","demandForResources","demandForReusedPhones","inflowIncentiveSumForPhonesInUse","phoneGoal","phonesInUseExcess","supplyOfBrokenPhonesForDisposal","supplyOfBrokenPhonesForRepair","supplyOfDisposedPhonesForLandfilling","supplyOfDisposedPhonesForRecycling","supplyOfHibernatingPhonesForDisposal","supplyOfHibernatingPhonesForRefurbishment","supplyOfHibernatingPhonesForReuse"],l=["abandonExcessRate","abandonRate","acquireRate","breakRate","capacityAdjustmentRate","disposeIncentive","disposeRate","landfillIncentive","landfillRate","naturalResourceMiningRate","naturalResourcesIncentive","newPhoneProductionRate","newlyProducedPhoneIncentive","numberOfUsers","phonesPerUserGoal","recycleRate","recyclingIncentive","refurbishmentIncentive","refurbishmentRate","repairIncentive","repairRate","reuseIncentive","userdata"];class c extends o.Model{static #e=this.initialStocks={capacityOfNaturalResources:0,capacityOfNewlyProducedPhones:0,capacityOfPhonesInUse:0,capacityOfRecycledMaterials:0,capacityOfRefurbishedPhones:0,capacityOfRepairedPhones:0,phonesInUse:0,supplyOfBrokenPhones:0,supplyOfDisposedPhones:0,supplyOfHibernatingPhones:0,supplyOfNaturalResources:0,supplyOfNewlyProducedPhones:0,supplyOfRecycledMaterials:0,supplyOfRefurbishedPhones:0,supplyOfRepairedPhones:0};static #t=this.defaultParameters={abandonExcessRate:.5,abandonRate:.1,acquireRate:1,breakRate:.1,capacityAdjustmentRate:.1,disposeIncentive:.5,disposeRate:.5,landfillIncentive:.5,landfillRate:1,naturalResourceMiningRate:.5,naturalResourcesIncentive:.5,newPhoneProductionRate:.5,newlyProducedPhoneIncentive:.82,numberOfUsers:1e6,phonesPerUserGoal:1,recycleRate:1,recyclingIncentive:.89,refurbishmentIncentive:.5,refurbishmentRate:1,repairIncentive:.5,repairRate:1,reuseIncentive:.86,userdata:0};constructor(){super(a,n,i,l)}// eslint-disable-next-line class-methods-use-this
evaluate(e,t,r){let{capacityOfNaturalResources:o,capacityOfNewlyProducedPhones:a,capacityOfPhonesInUse:n,capacityOfRecycledMaterials:i,capacityOfRefurbishedPhones:s,capacityOfRepairedPhones:l,phonesInUse:c,supplyOfBrokenPhones:u,supplyOfDisposedPhones:d,supplyOfHibernatingPhones:p,supplyOfNaturalResources:m,supplyOfNewlyProducedPhones:f,supplyOfRecycledMaterials:h,supplyOfRefurbishedPhones:g,supplyOfRepairedPhones:y}=e,{abandonExcessRate:b,abandonRate:S,acquireRate:_,breakRate:k,capacityAdjustmentRate:x,disposeIncentive:C,disposeRate:P,landfillIncentive:T,landfillRate:E,naturalResourceMiningRate:M,naturalResourcesIncentive:I,newPhoneProductionRate:R,newlyProducedPhoneIncentive:O,numberOfUsers:w,phonesPerUserGoal:N,recycleRate:B,recyclingIncentive:A,refurbishmentIncentive:D,refurbishmentRate:j,repairIncentive:V,repairRate:L,reuseIncentive:F,userdata:G}=t,U=w*N,q=Math.max(c-U,0),H=S*c+b*q,z=k*c,$=Math.min(Math.max(0,n-c+z+H),U),W=_*Math.min(f,$),K=_*Math.min($,g),Q=_*Math.min($,y),Y=F/(F+D+C)*p,J=Math.max(a-f+W,0),X=I/(I+A)*J,Z=F+V+D+O,ee=O/Z*$,et=A/(I+A)*J,er=D/Z*$,eo=C/(V+C)*u,ea=C/(F+D+C)*p,en=T/(A+T)*d,ei=R*Math.min(m,J),es=Math.max(o-m+ei,0),el=R*Math.min(J,h),ec=A/(A+T)*d,eu=Math.max(i-h+el,0),ed=D/(F+D+C)*p,ep=Math.max(s-g+K,0),em=V/(V+C)*u,ef=Math.max(l-y+Q,0),eh=V/Z*$;return{t:r,stocks:e,parameters:t,variables:{demandForMining:es,demandForNaturalResources:X,demandForNewlyProducedPhones:ee,demandForPhones:$,demandForRecycledMaterials:et,demandForRecycling:eu,demandForRefurbishedPhones:er,demandForRefurbishment:ep,demandForRepair:ef,demandForRepairedPhones:eh,demandForResources:J,demandForReusedPhones:F/Z*$,inflowIncentiveSumForPhonesInUse:Z,phoneGoal:U,phonesInUseExcess:q,supplyOfBrokenPhonesForDisposal:eo,supplyOfBrokenPhonesForRepair:em,supplyOfDisposedPhonesForLandfilling:en,supplyOfDisposedPhonesForRecycling:ec,supplyOfHibernatingPhonesForDisposal:ea,supplyOfHibernatingPhonesForRefurbishment:ed,supplyOfHibernatingPhonesForReuse:Y},flows:{abandon:H,acquireNewlyProduced:W,acquireRefurbished:K,acquireRepaired:Q,acquireUsed:_*Math.min(Y,$),capacityOfNaturalResourcesAdjustment:x*(X-o),capacityOfNewlyProducedPhonesAdjustment:x*(ee-a),capacityOfPhonesInUseAdjustment:x*(U-n),capacityOfRecycledMaterialsAdjustment:x*(et-i),capacityOfRefurbishedPhonesAdjustment:x*(er-s),disposeBroken:P*eo,disposeHibernating:P*ea,goBroken:z,landfill:E*en,mineNaturalResources:M*es,produceFromNaturalResources:ei,produceFromRecycledMaterials:el,recycle:B*Math.min(ec,eu),refurbish:j*Math.min(ed,ep),repair:L*Math.min(em,ef),repairShopCapcityAdjustment:x*(eh-l)}}}// eslint-disable-next-line class-methods-use-this
accumulateFlowsPerStock(e){let{abandon:t,acquireNewlyProduced:r,acquireRefurbished:o,acquireRepaired:a,acquireUsed:n,capacityOfNaturalResourcesAdjustment:i,capacityOfNewlyProducedPhonesAdjustment:s,capacityOfPhonesInUseAdjustment:l,capacityOfRecycledMaterialsAdjustment:c,capacityOfRefurbishedPhonesAdjustment:u,disposeBroken:d,disposeHibernating:p,goBroken:m,landfill:f,mineNaturalResources:h,produceFromNaturalResources:g,produceFromRecycledMaterials:y,recycle:b,refurbish:S,repair:_,repairShopCapcityAdjustment:k}=e;return{capacityOfNaturalResources:i,capacityOfNewlyProducedPhones:s,capacityOfPhonesInUse:l,capacityOfRecycledMaterials:c,capacityOfRefurbishedPhones:u,capacityOfRepairedPhones:k,phonesInUse:r+o+a+n-(t+m),supplyOfBrokenPhones:m-(d+_),supplyOfDisposedPhones:d+p-(f+b),supplyOfHibernatingPhones:t-(n+p+S),supplyOfNaturalResources:h-g,supplyOfNewlyProducedPhones:g+y-r,supplyOfRecycledMaterials:b-y,supplyOfRefurbishedPhones:S-o,supplyOfRepairedPhones:_-a}}}}),l("jRMUH",function(e,t){r(e.exports,"Model",function(){return a});var o=s("4E5XB");class a{static #e=this.elementIds=["stocks","parameters","variables","flows"];constructor(e,t,r,o){this.stockIds=e,this.flowIds=t,this.variableIds=r,this.parameterIds=o}static elementObjectToArray(e,t){return e.map(e=>t[e])}static arrayToElementObject(e,t){let r={};for(let o=0;o<e.length;o+=1){let a=e[o];r[a]=t[o]}return r}stocksToStockArray(e){return a.elementObjectToArray(this.stockIds,e)}stockArrayToStocks(e){return a.arrayToElementObject(this.stockIds,e)}flowsToFlowArray(e){return a.elementObjectToArray(this.flowIds,e)}flowArrayToFlows(e){return a.arrayToElementObject(this.flowIds,e)}variablesToVariableArray(e){return a.elementObjectToArray(this.variableIds,e)}variableArrayToVariables(e){return a.arrayToElementObject(this.variableIds,e)}parametersToParameterArray(e){return a.elementObjectToArray(this.parameterIds,e)}parameterArrayToParameters(e){return a.arrayToElementObject(this.parameterIds,e)}evaluateFlowPerStock(e,t,r){let{flows:o}=this.evaluate(e,t,r);return this.accumulateFlowsPerStock(o)}createFlowEvaluator(e){return(t,r)=>{let o=this.stockArrayToStocks(t),a=this.evaluateFlowPerStock(o,e,r),n=this.stocksToStockArray(a);return n}}step(e,t,r,a){let n=this.stocksToStockArray(e),i=(0,o.step)(n,t,r,a);return this.stockArrayToStocks(i)}}}),l("4E5XB",function(e,t){r(e.exports,"step",function(){return a});var o=s("3h2ov");function a(e,t,r,a,n,i){return"number"==typeof t?(0,o.step)(e,t,r,a,n):function(e,t,r,a,n,i){let s=[...t];return(0,o.step)(e,r,a,(e,t)=>t===r?s:n(e,t),i)}(e,t,r,a,n,i)}}),l("3h2ov",function(e,t){r(e.exports,"step",function(){return a}),r(e.exports,"converge",function(){return n});var o=s("555Ja");function a(e,t,r,a,n=o.rk4){return n(e,t,r,a)}function n(e,t,r,a,n,i=o.rk4){let s=0,{userdata:l,done:c}=n(e,t,void 0,0);if(!c){let o,u=t;do o=i(o??e,u,r,a),u+=r,s+=1,{userdata:l,done:c}=n(o,u,l,s);while(!c)}return l}}),l("555Ja",function(e,t){r(e.exports,"rk4",function(){return o});function o(e,t,r,o){let a=e.length,n=o(e,t),i=Array(a),s=r/2,l=r/6,c=t+s;for(let t=0;t<a;t+=1)i[t]=e[t]+s*n[t];let u=o(i,c);for(let t=0;t<a;t+=1)i[t]=e[t]+s*u[t];let d=o(i,c);for(let t=0;t<a;t+=1)i[t]=e[t]+r*d[t],d[t]+=u[t];u=o(i,t+r);for(let t=0;t<a;t+=1)i[t]=e[t]+l*(n[t]+u[t]+2*d[t]);return i}}),l("5rTuK",function(e,t){r(e.exports,"useParameterTransformsStore",function(){return u});var o=s("kV0Ly"),a=s("djimy"),n=s("aDsGb"),i=s("k6FcS"),l=s("7dQGn");function c({id:e,script:t}){let r=(0,a.ref)(t),o=(0,a.computed)(()=>(function(e,t){e.forEach(e=>{if(!(0,i.isVarName)(e))throw Error(`Parameter name '${e}' can not be used as a variable`)});// eslint-disable-next-line @typescript-eslint/no-implied-eval
    let r=Function(t).toString(),o=Function(`{ ${e.join(", ")} }`,`(${r})(); return { ${e.join(", ")} }`);return e=>{let t=o(e);return Object.assign(e,t),e}})(n.parameterIds,r.value));return{id:e,script:r,transform:o}}let u=(0,o.defineStore)("parameter-transforms",()=>{let{config:e}=(0,l.useConfigStore)(),t=(0,a.reactive)(e.parameterTransforms.map(e=>(0,a.reactive)(c(e))));return{parameterTransforms:t,addOrModify:(e,r)=>{let o=t.findIndex(t=>t.id===e);if(-1===o){let o=c({id:e,script:r});t.push((0,a.reactive)(o))}else t[o].script=r},move:(e,r)=>{let[o]=t.splice(e,1);t.splice(r,0,o)},remove:e=>{let r=t.findIndex(t=>t.id===e);-1!==r&&t.splice(r,1)},replaceAll:e=>{let r=e.map(e=>(0,a.reactive)(c(e)));t.splice(0,t.length,...r)}}})}),l("k6FcS",function(e,t){r(e.exports,"isVarName",function(){return o});function o(e){return"string"==typeof e&&e.trim()===e&&null!==e.match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)}}),l("cIjax",function(e,t){r(e.exports,"useParameterTransformId",function(){return u}),r(e.exports,"useSlotGroupsStore",function(){return m});var o=s("kV0Ly"),a=s("djimy"),n=s("gK2p2"),i=s("7dQGn"),l=s("5rTuK"),c=s("6clsW");function u(e){let t=(0,n.default)();return(0,a.reactive)({id:e,uuid:t,active:!1,setActive:function(e){this.active!==e&&(this.active=e)}})}function d(){let e=(0,l.useParameterTransformsStore)(),t=(0,a.reactive)(e.parameterTransforms.map(({id:e})=>u(e)));return{id:"internal",parameterTransforms:t}}function p(e){let{type:t}=e;switch(t){case"basic":return function(e){let{id:t}=e,r=(0,a.reactive)(e.parameterTransformIds.map(u));return{id:t,parameterTransforms:r}}(e);case"action-card":return function(e){let{id:t}=e,r=(0,a.reactive)(e.cards.map(({parameterTransformId:e})=>u(e)));return{id:t,parameterTransforms:r}}(e);case"event-card":return function(e){let{id:t}=e,r=(0,a.reactive)(e.cards.map(({parameterTransformId:e})=>u(e)));return{id:t,parameterTransforms:r}}(e);default:return(0,c.exhaustiveGuard)(t)}}let m=(0,o.defineStore)("slot-groups",()=>{let{config:e}=(0,i.useConfigStore)(),t=d(),r=e.interaction.slotGroups.map(p),o=[t,...r];return{slotGroups:o,internalSlotGroup:t,nonInternalSlotGroups:r,rebuildInternalSlotGroup:()=>{t.parameterTransforms.splice(0,t.parameterTransforms.length,...d().parameterTransforms)}}})}),l("6clsW",function(e,t){r(e.exports,"exhaustiveGuard",function(){return o});function o(e){throw Error(`Reached forbidden guard function with unexpected value: ${JSON.stringify(e)}`)}}),l("dNJei",function(e,t){r(e.exports,"Scores",function(){return i});var a=s("hWymx"),n=s("7vmPr");class i{static circularity(e){let{produceFromNaturalResources:t,produceFromRecycledMaterials:r,acquireUsed:a,acquireRepaired:i,acquireRefurbished:s,repair:l,refurbish:c,recycle:u,landfill:d}=e.flows,p=a+(l+i)/2+(c+s)/2+(u+r)/2,m=/*@__PURE__*/o(n)(p/(p+(t+d)/2),0,1);return m}static coverage(e){let{phonesInUse:t}=e.stocks,{phoneGoal:r}=e.variables,o=t/r;return!Number.isFinite(o)||Number.isNaN(o)?0:((0,a.strict)(o>=0,"userSatisfaction should be greater than 0"),o)}static all(e){let t=i.circularity(e),r=i.coverage(e);return{circularity:t,coverage:r}}}}),l("d3Cdr",function(e,t){r(e.exports,"render",function(){return f});var o=s("djimy");let a={class:"scores"},n={class:"score-table"},i={colspan:"2",class:"primary-text header"},l={class:"label-column"},c={class:"primary-text"},u={class:"secondary-text"},d={class:"primary-text score-column"},p={class:"score-value"},m={colspan:"2",class:"secondary-text footer"};function f(e,t,r,s,f,h){return(0,o.openBlock)(),(0,o.createElementBlock)("div",a,[(0,o.createElementVNode)("table",n,[(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("td",i,(0,o.toDisplayString)(s.getPrimary(s.description).value),1)]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.scores,({id:e,score:t,primaryLabel:r,secondaryLabel:a})=>((0,o.openBlock)(),(0,o.createElementBlock)("tr",{key:e},[(0,o.createElementVNode)("td",l,[(0,o.createElementVNode)("div",c,(0,o.toDisplayString)(r.value)+"\xa0",1),(0,o.createElementVNode)("div",u,(0,o.toDisplayString)(a.value),1)]),(0,o.createElementVNode)("td",d,[(0,o.createElementVNode)("div",p,(0,o.toDisplayString)(s.format(t.value)),1)])]))),128)),(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("td",m,(0,o.toDisplayString)(s.getSecondary(s.description).value),1)])])])}}),l("eATDO",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("lbosM",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("4rVEm")).__esModule&&(o=o.default),o.render=s("hT9Bb").render,o.__cssModules={},s("9nPpA").default(o),o.__scopeId="data-v-88ca19",o.__file="ControlPanel.vue";var a=o}),l("4rVEm",function(e,o){t(e.exports),r(e.exports,"default",function(){return p});var a=s("djimy"),n=s("1jdKh"),i=s("iTpok"),l=s("3PxCe"),c=s("LU3Tp"),u=s("c1iJh"),d=s("d1qRQ"),p=/*#__PURE__*/(0,a.defineComponent)({__name:"ControlPanel",props:{disabled:Boolean},setup(e,{expose:t}){t();let r=(0,a.ref)(!0),o=(0,a.ref)(!0),s={props:e,diagramsTabDisabled:r,rawDataTabDisabled:o,ControlPanelTabInitialParameters:n.default,ControlPanelTabParameterTransforms:i.default,ControlPanelTabCharts:l.default,ControlPanelTabRawData:c.default,ControlPanelTabImportExport:u.default,ControlPanelTabMisc:d.default};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}})}),l("1jdKh",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("6swzs")).__esModule&&(o=o.default),o.render=s("hqass").render,o.__cssModules={},s("HR4Xa").default(o),o.__scopeId="data-v-da743b",o.__file="ControlPanelTabInitialParameters.vue";var a=o}),l("6swzs",function(e,o){t(e.exports),r(e.exports,"default",function(){return u});var a=s("djimy"),n=s("kV0Ly"),i=s("9OMm5"),l=s("i5N9G"),c=s("aDsGb"),u=/*#__PURE__*/(0,a.defineComponent)({__name:"ControlPanelTabInitialParameters",setup(e,{expose:t}){t();let r=(0,l.useModelStore)(),o=(0,i.toReactive)((0,n.storeToRefs)(r).initialParameters),a={modelStore:r,initialParameters:o,get parameterIds(){return c.parameterIds}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}})}),l("hqass",function(e,t){r(e.exports,"render",function(){return n});var o=s("djimy");let a=["onUpdate:modelValue"];function n(e,t,r,n,i,s){return(0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(n.parameterIds,e=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:e},[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(e)+" = "+(0,o.toDisplayString)(n.initialParameters[e]),1),(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"range",min:"0",max:"4",step:"0.001","onUpdate:modelValue":t=>n.initialParameters[e]=t},null,8,a),[[o.vModelText,n.initialParameters[e],void 0,{number:!0}]])]))),128)}}),l("HR4Xa",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("iTpok",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("2eFwL")).__esModule&&(o=o.default),o.render=s("f0bUl").render,o.__cssModules={},s("4Of6y").default(o),o.__scopeId="data-v-75f13d",o.__file="ControlPanelTabParameterTransforms.vue";var a=o}),l("2eFwL",function(e,o){t(e.exports),r(e.exports,"default",function(){return d});var a=s("djimy"),n=s("hWymx"),i=s("aWxmM"),l=s("i5N9G"),c=s("5rTuK"),u=s("cIjax"),d=/*#__PURE__*/(0,a.defineComponent)({__name:"ControlPanelTabParameterTransforms",setup(e,{expose:t}){t();let{transformedParametersExt:r}=(0,l.useModelStore)(),o=(0,c.useParameterTransformsStore)(),{slotGroups:s,nonInternalSlotGroups:d,internalSlotGroup:p}=(0,u.useSlotGroupsStore)(),m=(0,a.ref)(""),f=(0,a.ref)("");function h(e,t){o.move(e,t)}let g=(0,a.ref)(null);(0,a.onMounted)(()=>{(0,n.strict)(g.value),(0,i.default).create(g.value,{onEnd:e=>{let{newDraggableIndex:t,oldDraggableIndex:r}=e;(0,n.strict)(void 0!==t),(0,n.strict)(void 0!==r),h(r,t)}})});let y={transformedParametersExt:r,parameterTransformsStore:o,slotGroups:s,nonInternalSlotGroups:d,internalSlotGroup:p,newId:m,newScript:f,select:function({id:e}){m.value=e,f.value=o.parameterTransforms.find(t=>t.id===e)?.script??""},addOrModify:function(e,t){o.addOrModify(e,t);let r=p.parameterTransforms.findIndex(t=>t.id===e);if(-1===r){// The parameter transform is not yet in the internal slot group, so we add it
let t=(0,u.useParameterTransformId)(e);p.parameterTransforms.push(t)}},remove:function(e){let t=-1!==d.flatMap(({parameterTransforms:e})=>e).findIndex(t=>t.id===e);if(t){alert("Cannot remove parameter transform that is still used in a non-internal slot group");return}let r=()=>p.parameterTransforms.findIndex(t=>t.id===e);for(let e=r();-1!==e;e=r())p.parameterTransforms.splice(e,1);o.remove(e)},move:h,deactivateAllInternal:function(){p.parameterTransforms.forEach(e=>{// eslint-disable-next-line no-param-reassign
e.active=!1})},createTooltip:(e,t)=>{let o=s.findIndex(t=>t===e);(0,n.strict)(-1!==o);let a=r[o],i=e.parameterTransforms.findIndex(e=>e===t);(0,n.strict)(-1!==i);let l=a.steps[i],{active:c,script:u,diff:d}=l;return c?`Diff: ${JSON.stringify(d,null,2)}

Script:
${u}`:`Script:
${u}`},availableContainer:g};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}})}),l("f0bUl",function(e,t){r(e.exports,"render",function(){return P});var o=s("djimy");let a={id:"parameter-transforms",class:"parameter-transforms"},n={ref:"availableContainer",class:"available"},i=["id","data-id","title"],l={class:"draggable"},c=["name","value","onUpdate:modelValue"],u={class:"draggable"},d=["onClick"],p=/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1),m=/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1),f=/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1),h=/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1),g=/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1),y={class:"slot-group-transforms"},b=["data-id"],S=/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1),_={class:"available"},k=["data-id","title"],x=["name","value","onUpdate:modelValue"],C=["onClick"];function P(e,t,r,s,P,T){return(0,o.openBlock)(),(0,o.createElementBlock)("div",a,[(0,o.createElementVNode)("div",null,[(0,o.createTextVNode)(" Internal (applied first): "),(0,o.createElementVNode)("div",n,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.internalSlotGroup.parameterTransforms,e=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"parameter-transform",key:e.uuid,id:e.uuid,"data-id":e.id,title:s.createTooltip(s.internalSlotGroup,e)},[(0,o.createElementVNode)("label",l,[(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"checkbox",name:e.id,value:e.id,"onUpdate:modelValue":t=>e.active=t},null,8,c),[[o.vModelCheckbox,e.active]]),(0,o.createElementVNode)("span",u,(0,o.toDisplayString)(e.id),1)]),(0,o.createElementVNode)("span",{class:"edit",onClick:t=>s.select(e)},"✎",8,d)],8,i))),128))],512),p,(0,o.createElementVNode)("input",{type:"button",value:"Deactivate active internal transforms",onClick:t[0]||(t[0]=e=>s.deactivateAllInternal())})]),(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("div",null,[(0,o.createTextVNode)(" Id:"),m,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.newId=e),name:"parameter-transform-id"},null,512),[[o.vModelText,s.newId]]),f,(0,o.createTextVNode)(" Script:"),h,(0,o.withDirectives)((0,o.createElementVNode)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.newScript=e),rows:"5",cols:"10",name:"parameter-transform-script"},null,512),[[o.vModelText,s.newScript]]),g,(0,o.createElementVNode)("input",{type:"button",value:"Add/Modify",onClick:t[3]||(t[3]=e=>s.addOrModify(s.newId,s.newScript))}),(0,o.createElementVNode)("input",{type:"button",value:"Delete",onClick:t[4]||(t[4]=e=>s.remove(s.newId))})]),(0,o.createElementVNode)("div",y,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.nonInternalSlotGroups,e=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:e.id,"data-id":e.id},[S,(0,o.createTextVNode)(" Slot group '"+(0,o.toDisplayString)(e.id)+"': ",1),(0,o.createElementVNode)("div",_,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.parameterTransforms,t=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t.uuid,"data-id":t.id,title:s.createTooltip(e,t)},[(0,o.createElementVNode)("label",null,[(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"checkbox",name:t.id,value:t.id,"onUpdate:modelValue":e=>t.active=e,disabled:""},null,8,x),[[o.vModelCheckbox,t.active]]),(0,o.createTextVNode)((0,o.toDisplayString)(t.id),1)]),(0,o.createElementVNode)("span",{class:"edit",onClick:e=>s.select(t)},"✎",8,C)],8,k))),128))])],8,b))),128))])])])}}),l("4Of6y",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("3PxCe",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("4KeeH")).__esModule&&(o=o.default),o.render=s("fqpjM").render,s("aJLcO").default(o),o.__scopeId="data-v-ff532a",o.__file="ControlPanelTabCharts.vue";var a=o}),l("4KeeH",function(e,o){t(e.exports),r(e.exports,"default",function(){return u});var a=s("djimy"),n=s("hWymx"),i=s("dbRyT"),l=s("i5N9G"),c=s("aDsGb"),u=/*#__PURE__*/(0,a.defineComponent)({__name:"ControlPanelTabCharts",props:{disabled:Boolean},setup(e,{expose:t}){function r(e){return(0,c.CircularEconomyModel).elementIds.map(t=>Object.entries(e[t]).map(([e,t])=>({id:e,value:t}))).reduce((e,t)=>[...e,...t],[])}t(),(0,i.Chart).register(i.BarController,i.Title,i.Tooltip,i.Legend,i.BarElement,i.CategoryScale,i.LinearScale);let o=(0,l.useModelStore)(),s={stocks:c.stockIds,flows:c.flowIds,variables:c.variableIds,parameters:c.parameterIds},u=Object.values(s).flat(),d=(0,a.ref)(null);(0,a.onMounted)(()=>{(0,n.strict)(d.value);let t=new i.Chart(d.value,{type:"bar",data:{labels:u,datasets:[{label:"Values",data:Array(u.length).fill(0)}]},options:{animation:!1}});(0,a.watchEffect)(()=>{if(e.disabled)return;let a=r(o.record);t.data.datasets[0].data=a.map(e=>e.value),t.update()})});let p={props:e,toChartJsRecord:r,modelStore:o,labels:s,labelsArray:u,canvas:d};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}})}),l("fqpjM",function(e,t){r(e.exports,"render",function(){return i});var o=s("djimy");let a={style:{width:"100%"}},n={ref:"canvas"};function i(e,t,r,i,s,l){return(0,o.openBlock)(),(0,o.createElementBlock)("div",a,[(0,o.createElementVNode)("canvas",n,null,512)])}}),l("aJLcO",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("LU3Tp",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("7ApkJ")).__esModule&&(o=o.default),o.render=s("9Iuzd").render,o.__cssModules={},s("fGK4y").default(o),o.__scopeId="data-v-f24568",o.__file="ControlPanelTabRawData.vue";var a=o}),l("7ApkJ",function(e,o){t(e.exports),r(e.exports,"default",function(){return c});var a=s("djimy"),n=s("i5N9G"),i=s("jRMUH"),l=s("dNJei"),c=/*#__PURE__*/(0,a.defineComponent)({__name:"ControlPanelTabRawData",props:{disabled:Boolean},setup(e,{expose:t}){t();let r=(0,n.useModelStore)(),o=(0,a.computed)(()=>(0,l.Scores).all(r.record)),s=e=>{let t=10**e;return(e,r)=>"number"==typeof r?Math.round(r*t)/t:r},c=s(2),u=s(3),d={props:e,modelStore:r,scores:o,createFormatter:s,format2:c,format3:u,get Model(){return i.Model}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}})}),l("9Iuzd",function(e,t){r(e.exports,"render",function(){return l});var o=s("djimy");let a={key:0,class:"container"},n={class:"preformatted"},i={class:"preformatted"};function l(e,t,r,s,l,c){return s.props.disabled?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",a,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.Model.elementIds,e=>((0,o.openBlock)(),(0,o.createElementBlock)("div",n,(0,o.toDisplayString)(`${e}: ${JSON.stringify(s.modelStore.record[e],s.format2,2)}`),1))),256)),(0,o.createElementVNode)("div",i,(0,o.toDisplayString)(`scores: ${JSON.stringify(s.scores,s.format3,2)}`),1)]))}}),l("fGK4y",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("c1iJh",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("jVwA8")).__esModule&&(o=o.default),o.render=s("gpQtt").render,o.__cssModules={},s("dtadU").default(o),o.__scopeId="data-v-6adaee",o.__file="ControlPanelTabImportExport.vue";var a=o}),l("jVwA8",function(e,o){t(e.exports),r(e.exports,"default",function(){return m});var a=s("djimy"),n=s("jTevu"),i=s("5rTuK"),l=s("cIjax"),c=s("7dQGn"),u=s("i5N9G"),d=s("krAM6"),p=s("coVQp"),m=/*#__PURE__*/(0,a.defineComponent)({__name:"ControlPanelTabImportExport",setup(e,{expose:t}){t();let{config:r}=(0,c.useConfigStore)(),o=(0,i.useParameterTransformsStore)(),{parameterTransforms:s}=o,{rebuildInternalSlotGroup:m}=(0,l.useSlotGroupsStore)(),{initialParameters:f,transformedParametersExt:h}=(0,u.useModelStore)(),g={SUCCESS:0,UNPROCESSED:1,UNKNOWN:2,ERROR:3},y={[g.SUCCESS]:"Successfully imported.",[g.UNPROCESSED]:"",[g.UNKNOWN]:"Unknown import state. Please check the developer console.",[g.ERROR]:"Failed to import. Please check the developer console."},b=(0,a.ref)(""),S=(0,a.ref)(g.UNPROCESSED),_=(0,a.ref)(""),k=(0,a.ref)(g.UNPROCESSED);function x(e){try{let t=(0,n.default).load(e)??{},o=(0,p.ConfigLoader).merge(structuredClone((0,a.toRaw)(r)),t),i=(0,d.validateConfig)(o);if(!i.ok){/* eslint-disable no-console */let{error:{errors:e,explanation:t}}=i;return console.error("Invalid configuration:",o),console.error(t),console.error("Issues reported by the configuration validator:",...e??[]),null}return i.data}catch(e){return console.error("Failed to parse YAML:",e),null}}async function C(){let e=x(_.value);if(k.value=null===e?g.ERROR:g.UNKNOWN,!e)return;let{model:{initialParameters:t}}=e;Object.assign(f,t),k.value=g.SUCCESS}async function P(){let e=x(b.value);if(S.value=null===e?g.ERROR:g.UNKNOWN,!e)return;let{parameterTransforms:t}=e,r=new Promise((e,t)=>{(0,a.watch)(h,e,{deep:!0,once:!0})});o.replaceAll(t),m(),await r,S.value=g.SUCCESS}let T={config:r,parameterTransformsStore:o,parameterTransforms:s,rebuildInternalSlotGroup:m,initialParameters:f,transformedParametersExt:h,OState:g,stateTooltips:y,parameterTransformsYamlText:b,parameterTransformImportState:S,initialParametersYamlText:_,initialParametersImportState:k,deriveConfig:x,importInitialParameters:C,importParameterTransforms:P,exportInitialParameters:function(){k.value=g.UNPROCESSED,_.value=(0,n.default).dump({model:{initialParameters:f}}),console.log(_.value)},exportParameterTransforms:function(){S.value=g.UNPROCESSED;let e={parameterTransforms:s.map(({id:e,script:t})=>({id:e,script:t}))};b.value=(0,n.default).dump(e),console.log(b.value)}};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}})}),l("krAM6",function(e,t){r(e.exports,"validateConfig",function(){return l});var o=s("Clc2s"),a=s("ke2S4");s("bepfO");let n=a.SuretypeConfigSchema,i=(0,o.compile)(n);(0,o.compile)(n,{ensure:!0}),(0,o.compile)(n,{simple:!0});let l=e=>{let t=i(e);if(!t.ok){let{errors:e,explanation:r}=t;return{ok:!1,error:{errors:e,explanation:r}}}return{ok:!0,data:e}}}),l("ke2S4",function(e,t){r(e.exports,"SuretypeConfigSchema",function(){return M});var o=s("Clc2s"),a=s("aDsGb");let n=(0,o.v).string().matches(/_x[+-]?[0-9]+_y[+-]?[0-9]+\.[a-zA-Z0-9]+$/g),i=(0,o.v).object({url:n.required()}).additional(!1),l=(0,o.suretype)({name:"I18nConfig"},(0,o.v).object({}).additional((0,o.v).string())),c=(0,o.suretype)({name:"ParameterTransformConfig"},(0,o.v).object({id:(0,o.v).string().required(),script:(0,o.v).string().required()}).additional(!1).required()),u=(0,o.v).array(c),d=(0,o.suretype)({name:"InitialParametersConfig"},(0,o.v).object(Object.fromEntries((0,a.parameterIds).map(e=>[e,(0,o.v).number().required()]))).additional(!1)),p=(0,o.suretype)({name:"InitialStocksConfig"},(0,o.v).object(Object.fromEntries((0,a.stockIds).map(e=>[e,(0,o.v).number().required()]))).additional(!1)),m=(0,o.suretype)({name:"MarkerSlotConfig"},(0,o.v).object({id:(0,o.v).string().required(),x:(0,o.v).number().required(),y:(0,o.v).number().required(),angle:(0,o.v).number().required()}).additional(!1)),f=(0,o.suretype)({name:"CardSlotConfig"},(0,o.v).object({id:(0,o.v).string().required(),x:(0,o.v).number().required(),y:(0,o.v).number().required(),angle:(0,o.v).number().required()}).additional(!1)),h=(0,o.suretype)({name:"CardConfig"},(0,o.v).object({parameterTransformId:(0,o.v).string().required(),url:(0,o.v).string().required()}).additional(!1)),g=(0,o.v).string().matches(/^((?!internal).)*$/g),y=(0,o.suretype)({name:"SlotGroupAssetConfig"},(0,o.v).object({markerSlotActive:i.required(),markerSlotInactive:i.required()}).additional(!1)),b=(0,o.suretype)({name:"BasicSlotGroupConfig"},(0,o.v).object({id:g.required(),type:(0,o.v).string().enum("basic").required(),label:l.required(),assets:y.required(),slots:(0,o.v).array(m).required(),parameterTransformIds:(0,o.v).array((0,o.v).string()).required()}).additional(!1)),S=(0,o.suretype)({name:"ActionCardSlotGroupConfig"},(0,o.v).object({id:g.required(),type:(0,o.v).string().enum("action-card").required(),label:l.required(),assets:y.required(),slots:(0,o.v).array((0,o.v).object({markerSlot:m.required(),cardSlot:f.required()}).additional(!1)).required(),cards:(0,o.v).array(h).required()}).additional(!1)),_=(0,o.suretype)({name:"EventCardSlotGroupConfig"},(0,o.v).object({id:g.required(),type:(0,o.v).string().enum("event-card").required(),label:l.required(),assets:y.required(),markerSlot:m.required(),cardSlots:(0,o.v).array(f).required(),cards:(0,o.v).array(h).required()}).additional(!1)),k=(0,o.suretype)({name:"SlotGroup"},(0,o.v).anyOf([b,S,_])),x=(0,o.suretype)({name:"ModelVisualizationLayerConfig"},(0,o.v).string().enum("modelVisualization")),C=(0,o.suretype)({name:"ConditionalLayerConfig"},(0,o.v).object({url:n.required(),condition:(0,o.v).string().required()}).additional(!1).required()),P=(0,o.v).array((0,o.v).anyOf([x,C])),T=(0,o.suretype)({name:"GeneralConfig"},(0,o.v).object({assetBaseDir:(0,o.v).string().required(),primaryLanguage:(0,o.v).string().required(),secondaryLanguage:(0,o.v).string().required(),description:l.required(),scoreLabels:(0,o.v).object({circularity:l.required(),coverage:l.required()}).additional(!1).required(),autoReset:(0,o.v).object({timeoutSeconds:(0,o.v).number().gte(0).required(),condition:(0,o.v).string().required(),title:l.required(),description:l.required()}).additional(!1).required()}).additional(!1)),E=(0,o.suretype)({name:"InteractionConfig"},(0,o.v).object({actionCardDelayMs:(0,o.v).number().gte(0).required(),eventCardMinDelayMs:(0,o.v).number().gte(0).required(),eventCardMaxDelayMs:(0,o.v).number().gte(0).required(),eventCardMinDurationMs:(0,o.v).number().gte(0).required(),eventCardMaxDurationMs:(0,o.v).number().gte(0).required(),slotGroups:(0,o.v).array(k).required()}).additional(!1)),M=(0,o.suretype)({name:"Config"},(0,o.v).object({general:T.required(),model:(0,o.v).object({initialParameters:d.required(),initialStocks:p.required()}).additional(!1).required(),simulation:(0,o.v).object({deltaPerSecond:(0,o.v).number().required(),maxStepSize:(0,o.v).number().required()}).additional(!1).required(),parameterTransforms:u.required(),interaction:E.required(),layers:P.required()}).additional(!1).required())}),l("bepfO",function(e,t){s("cbFbI")}),l("cbFbI",function(e,t){/* tslint:disable *//* eslint-disable *//**
 * This file is generated by core-types-ts on behalf of typeconv, DO NOT EDIT.
 * For more information, see:
 *  - {@link https://github.com/grantila/core-types-ts}
 *  - {@link https://github.com/grantila/typeconv}
 */}),l("coVQp",function(e,t){r(e.exports,"ConfigLoader",function(){return c});var a=s("jTevu"),n=s("fWsyq"),i=s("krAM6");function l(e,t){return t}class c{static async fetch(e){let t=await fetch(e);if(!t.ok)throw Error(`Failed to load config file '${e.toString()}': ${t.statusText}`);let r=await t.text(),o=(0,a.default).load(r,{schema:a.default.JSON_SCHEMA});if("object"!=typeof o||null===o)throw Error(`Failed to parse config file '${e.toString()}': ${JSON.stringify(o)}`);return o}static merge(...e){return /*@__PURE__*/o(n).all(e,{arrayMerge:l})}static async safeLoad(...e){let t=await Promise.all(e.map(async e=>[e,await c.fetch(e)])),r=c.merge(...t.map(([e,t])=>t)),o=(0,i.validateConfig)(r);return o.ok?{ok:!0,data:o.data}:{ok:!1,error:{config:{merged:r,segments:t},error:o.error}}}static async load(...e){let t=await c.safeLoad(...e);if(!t.ok)throw t.error;return t.data}}}),l("gpQtt",function(e,t){r(e.exports,"render",function(){return d});var o=s("djimy");let a=e=>((0,o.pushScopeId)("data-v-6adaee"),e=e(),(0,o.popScopeId)(),e),n=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1)),i=["title"],l=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1)),c=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1)),u=["title"];function d(e,t,r,a,s,d){return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createTextVNode)(" Initial parameters:"),n,(0,o.withDirectives)((0,o.createElementVNode)("textarea",{name:"initialParametersYamlText","onUpdate:modelValue":t[0]||(t[0]=e=>a.initialParametersYamlText=e),rows:"15",cols:"80",class:(0,o.normalizeClass)({success:a.initialParametersImportState===a.OState.SUCCESS,error:a.initialParametersImportState===a.OState.ERROR}),title:a.stateTooltips[a.initialParametersImportState],onInput:t[1]||(t[1]=e=>a.initialParametersImportState=a.OState.UNPROCESSED)},null,42,i),[[o.vModelText,a.initialParametersYamlText]]),(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("input",{type:"button",value:"Import",onClick:t[2]||(t[2]=e=>a.importInitialParameters())}),(0,o.createElementVNode)("input",{type:"button",value:"Export",onClick:t[3]||(t[3]=e=>a.exportInitialParameters())})]),l,(0,o.createTextVNode)(" Parameter transforms:"),c,(0,o.withDirectives)((0,o.createElementVNode)("textarea",{name:"parameterTransformYamlText","onUpdate:modelValue":t[4]||(t[4]=e=>a.parameterTransformsYamlText=e),rows:"15",cols:"80",class:(0,o.normalizeClass)({success:a.parameterTransformImportState===a.OState.SUCCESS,unknown:a.parameterTransformImportState===a.OState.UNKNOWN,error:a.parameterTransformImportState===a.OState.ERROR}),title:a.stateTooltips[a.parameterTransformImportState],onInput:t[5]||(t[5]=e=>a.parameterTransformImportState=a.OState.UNPROCESSED)},null,42,u),[[o.vModelText,a.parameterTransformsYamlText]]),(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("input",{type:"button",value:"Import",onClick:t[6]||(t[6]=e=>a.importParameterTransforms())}),(0,o.createElementVNode)("input",{type:"button",value:"Export",onClick:t[7]||(t[7]=e=>a.exportParameterTransforms())})])],64)}}),l("dtadU",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("d1qRQ",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("e1eyS")).__esModule&&(o=o.default),o.render=s("5Fgja").render,o.__cssModules={},s("kdosU").default(o),o.__scopeId="data-v-31cd2e",o.__file="ControlPanelTabMisc.vue";var a=o}),l("e1eyS",function(e,o){t(e.exports),r(e.exports,"default",function(){return d});var a=s("djimy"),n=s("gK2p2"),i=s("7Rjir"),l=s("f4LB1"),c=s("i5N9G"),u=s("5f8hv"),d=/*#__PURE__*/(0,a.defineComponent)({__name:"ControlPanelTabMisc",setup(e,{expose:t}){t();let r=(0,n.default)(),o=`btn-toggle-playing-${r}`,a=`btn-toggle-fullscreen-${r}`,s=`btn-toggle-dev-mode-${r}`,d=`btn-toggle-highlight-derivatives-${r}`,p=`btn-toggle-marker-slot-labels-${r}`,m=`btn-toggle-auto-reset-${r}`,f=(0,l.useAppStore)(),h=(0,c.useModelStore)(),g=(0,u.useVisualizationStore)(),y=Object.keys(g.scaleFactors),b={uuid:r,togglePlayingBtnId:o,toggleFullscreenBtnId:a,toggleDeveloperModeBtnId:s,toggleHighlightDerivativesBtnId:d,toggleMarkerSlotLabelsBtnId:p,toggleAutoResetBtnId:m,appStore:f,modelStore:h,visualizationStore:g,togglePlaying:()=>f.$patch({isPlaying:!f.isPlaying}),toggleFullscreen:()=>f.$patch({isFullscreen:!f.isFullscreen}),toggleDeveloperMode:()=>f.$patch({isDeveloperModeActive:!f.isDeveloperModeActive}),toggleHighlightDerivatives:()=>f.$patch({highlightDerivatives:!f.highlightDerivatives}),toggleMarkerSlotLabels:()=>f.$patch({showMarkerSlotLabels:!f.showMarkerSlotLabels}),resetModel:()=>h.reset(),toggleAutoReset:()=>{f.$patch({autoReset:!f.autoReset})},scaleFactorKeys:y,get HOTKEYS(){return i.HOTKEYS}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}})}),l("5f8hv",function(e,t){r(e.exports,"useVisualizationStore",function(){return n});var o=s("kV0Ly"),a=s("djimy");let n=(0,o.defineStore)("visualization",()=>{let e=(0,a.ref)({stock:3e4,stockHighlight:1,flow:.4,flowHighlight:10});return{scaleFactors:e}})}),l("5Fgja",function(e,t){r(e.exports,"render",function(){return g});var o=s("djimy");let a=e=>((0,o.pushScopeId)("data-v-31cd2e"),e=e(),(0,o.popScopeId)(),e),n=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1)),i=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1)),l=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1)),c=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1)),u=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1)),d=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1)),p=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("br",null,null,-1)),m={class:"scale-factors"},f=["for"],h=["id","onUpdate:modelValue"];function g(e,t,r,a,s,g){return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createElementVNode)("input",{type:"checkbox",class:(0,o.normalizeClass)(["btn-check",()=>a.appStore.isFullscreen?"active":""]),id:a.togglePlayingBtnId,autocomplete:"off",onClick:a.togglePlaying},null,2),(0,o.createElementVNode)("label",{class:"btn btn-primary",for:a.togglePlayingBtnId},"Run ("+(0,o.toDisplayString)(a.HOTKEYS.run.label)+")",1),n,(0,o.createElementVNode)("input",{type:"checkbox",class:(0,o.normalizeClass)(["btn-check",()=>a.appStore.isFullscreen?"active":""]),id:a.toggleFullscreenBtnId,autocomplete:"off"},null,2),(0,o.createElementVNode)("label",{class:"btn btn-primary",for:a.toggleFullscreenBtnId,onClick:a.toggleFullscreen},"Fullscreen ("+(0,o.toDisplayString)(a.HOTKEYS.fullscreen.label)+")",1),i,(0,o.createElementVNode)("input",{type:"checkbox",class:(0,o.normalizeClass)(["btn-check",()=>a.appStore.isDeveloperModeActive?"active":""]),id:a.toggleDeveloperModeBtnId,autocomplete:"off"},null,2),(0,o.createElementVNode)("label",{class:"btn btn-primary",for:a.toggleDeveloperModeBtnId,onClick:a.toggleDeveloperMode},"Developer mode ("+(0,o.toDisplayString)(a.HOTKEYS.developerMode.label)+")",1),l,(0,o.createElementVNode)("input",{type:"checkbox",class:(0,o.normalizeClass)(["btn-check",()=>a.appStore.highlightDerivatives?"active":""]),id:a.toggleHighlightDerivativesBtnId,autocomplete:"off"},null,2),(0,o.createElementVNode)("label",{class:"btn btn-primary",for:a.toggleHighlightDerivativesBtnId,onClick:a.toggleHighlightDerivatives},"Highlight derivatives ("+(0,o.toDisplayString)(a.HOTKEYS.highlightDerivatives.label)+")",1),c,(0,o.createElementVNode)("input",{type:"checkbox",class:(0,o.normalizeClass)(["btn-check",()=>a.appStore.showMarkerSlotLabels?"active":""]),id:a.toggleMarkerSlotLabelsBtnId,autocomplete:"off"},null,2),(0,o.createElementVNode)("label",{class:"btn btn-primary",for:a.toggleMarkerSlotLabelsBtnId,onClick:a.toggleMarkerSlotLabels},"Show marker slot labels"),u,(0,o.createElementVNode)("button",{type:"button",class:"btn btn-primary",onClick:a.resetModel}," Reset model ("+(0,o.toDisplayString)(a.HOTKEYS.reset.label)+")",1),d,(0,o.createElementVNode)("input",{type:"checkbox",class:(0,o.normalizeClass)(["btn-check",()=>a.appStore.autoReset?"active":""]),id:a.toggleAutoResetBtnId,autocomplete:"off"},null,2),(0,o.createElementVNode)("label",{class:"btn btn-primary",for:a.toggleAutoResetBtnId,onClick:a.toggleAutoReset},"Enable auto-reset"),p,(0,o.createElementVNode)("form",m,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.scaleFactorKeys,e=>((0,o.openBlock)(),(0,o.createElementBlock)("p",{key:e},[(0,o.createElementVNode)("label",{for:`viz-scale-factors-${e}-${a.uuid}`},(0,o.toDisplayString)(e)+":",9,f),(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"number",id:`viz-scale-factors-${e}-${a.uuid}`,"onUpdate:modelValue":t=>a.visualizationStore.scaleFactors[e]=t},null,8,h),[[o.vModelText,a.visualizationStore.scaleFactors[e]]])]))),128))])],64)}}),l("kdosU",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("hT9Bb",function(e,t){r(e.exports,"render",function(){return S});var o=s("djimy");let a=e=>((0,o.pushScopeId)("data-v-88ca19"),e=e(),(0,o.popScopeId)(),e),n={class:"control-panel"},i={class:"nav nav-tabs",id:"nav-tab",role:"tablist"},l=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("button",{class:"nav-link",id:"nav-initial-parameters-tab","data-bs-toggle":"tab","data-bs-target":"#nav-initial-parameters",type:"button",role:"tab","aria-controls":"nav-initial-parameters","aria-selected":"false"}," Initial parameters ",-1)),c=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("button",{class:"nav-link active",id:"nav-parameter-transforms-tab","data-bs-toggle":"tab","data-bs-target":"#nav-parameter-transforms",type:"button",role:"tab","aria-controls":"nav-parameter-transforms","aria-selected":"true"}," Parameter transforms ",-1)),u=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("button",{class:"nav-link",id:"nav-import-export-tab","data-bs-toggle":"tab","data-bs-target":"#nav-import-export",type:"button",role:"tab","aria-controls":"nav-import-export","aria-selected":"false"}," Import/Export ",-1)),d=/*#__PURE__*/a(()=>/*#__PURE__*/(0,o.createElementVNode)("button",{class:"nav-link",id:"nav-misc-tab","data-bs-toggle":"tab","data-bs-target":"#nav-misc",type:"button",role:"tab","aria-controls":"nav-misc","aria-selected":"true"}," Misc ",-1)),p={class:"tab-content",id:"nav-tabContent"},m={class:"tab-pane show",id:"nav-initial-parameters",role:"tabpanel","aria-labelledby":"nav-initial-parameters-tab",tabindex:"0"},f={class:"tab-pane show active",id:"nav-parameter-transforms",role:"tabpanel","aria-labelledby":"nav-parameter-transforms-tab",tabindex:"0"},h={class:"tab-pane show",id:"nav-diagrams",role:"tabpanel","aria-labelledby":"nav-diagrams-tab",tabindex:"0"},g={class:"tab-pane show",id:"nav-raw-data",role:"tabpanel","aria-labelledby":"nav-raw-data-tab",tabindex:"0"},y={class:"tab-pane show",id:"nav-import-export",role:"tabpanel","aria-labelledby":"nav-import-export-tab",tabindex:"0"},b={class:"tab-pane show",id:"nav-misc",role:"tabpanel","aria-labelledby":"nav-misc-tab",tabindex:"0"};function S(e,t,r,a,s,S){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)({hidden:a.props.disabled})},[(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("nav",null,[(0,o.createElementVNode)("div",i,[l,c,(0,o.createElementVNode)("button",(0,o.mergeProps)({class:"nav-link",id:"nav-diagrams-tab","data-bs-toggle":"tab","data-bs-target":"#nav-diagrams",type:"button",role:"tab","aria-controls":"nav-diagrams","aria-selected":"false"},(0,o.toHandlers)({"hidden.bs.tab":()=>a.diagramsTabDisabled=!0,"show.bs.tab":()=>a.diagramsTabDisabled=!1},!0))," Diagrams ",16),(0,o.createElementVNode)("button",(0,o.mergeProps)({class:"nav-link",id:"nav-raw-data-tab","data-bs-toggle":"tab","data-bs-target":"#nav-raw-data",type:"button",role:"tab","aria-controls":"nav-raw-data","aria-selected":"false"},(0,o.toHandlers)({"hidden.bs.tab":()=>a.rawDataTabDisabled=!0,"show.bs.tab":()=>a.rawDataTabDisabled=!1},!0))," Raw data ",16),u,d])]),(0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("div",m,[(0,o.createVNode)(a.ControlPanelTabInitialParameters)]),(0,o.createElementVNode)("div",f,[(0,o.createVNode)(a.ControlPanelTabParameterTransforms)]),(0,o.createElementVNode)("div",h,[(0,o.createVNode)(a.ControlPanelTabCharts,{disabled:a.props.disabled||a.diagramsTabDisabled},null,8,["disabled"])]),(0,o.createElementVNode)("div",g,[(0,o.createVNode)(a.ControlPanelTabRawData,{disabled:a.props.disabled||a.rawDataTabDisabled},null,8,["disabled"])]),(0,o.createElementVNode)("div",y,[(0,o.createVNode)(a.ControlPanelTabImportExport)]),(0,o.createElementVNode)("div",b,[(0,o.createVNode)(a.ControlPanelTabMisc)])])])],2)}}),l("9nPpA",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("4TkLj",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("8tP0r")).__esModule&&(o=o.default),o.render=s("3sm7t").render,o.__cssModules={},s("adIs9").default(o),o.__scopeId="data-v-a2975c",o.__file="ConditionalLayer.vue";var a=o}),l("8tP0r",function(e,o){t(e.exports),r(e.exports,"default",function(){return c});var a=s("djimy"),n=s("7dQGn"),i=s("i5N9G"),l=s("8CFAD"),c=/*#__PURE__*/(0,a.defineComponent)({__name:"ConditionalLayer",props:{layerConfig:{}},setup(e,{expose:t}){t();let{extractAssetPosition:r,toAssetUrl:o}=(0,n.useConfigStore)(),s=(0,i.useModelStore)();function c({condition:e,url:t}){let n=o(t),{x:i,y:c}=r(n),u=(0,l.compile)(e),d=(0,a.computed)(()=>u(s.record));return{checkCondition:u,condition:e,active:d,url:n,x:i,y:c}}let u=c(e.layerConfig),d={props:e,extractAssetPosition:r,toAssetUrl:o,modelStore:s,compileLayer:c,compiledLayer:u};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}})}),l("8CFAD",function(e,t){r(e.exports,"compile",function(){return n});var o=s("aDsGb");let a=`{ ${(0,o.CircularEconomyModel).elementIds.join(", ")} }`;function n(e){// eslint-disable-next-line @typescript-eslint/no-implied-eval
return Function(a,`return (${e}) === true;`)}}),l("3sm7t",function(e,t){r(e.exports,"render",function(){return n});var o=s("djimy");let a=["src","alt"];function n(e,t,r,n,i,s){return(0,o.openBlock)(),(0,o.createElementBlock)("img",{src:n.compiledLayer.url.href,class:(0,o.normalizeClass)(["positioned-layer",{inactive:!n.compiledLayer.active.value}]),style:(0,o.normalizeStyle)({"--layer-x":n.compiledLayer.x,"--layer-y":n.compiledLayer.y}),alt:`${n.compiledLayer.condition} -> ${n.compiledLayer.url}`},null,14,a)}}),l("adIs9",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("2vvax",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("eXrNq")).__esModule&&(o=o.default),o.render=s("jtxJg").render,s("eESbR").default(o),o.__scopeId="data-v-27331f",o.__file="BasicSlotGroup.vue";var a=o}),l("eXrNq",function(e,o){t(e.exports),r(e.exports,"default",function(){return u});var a=s("djimy"),n=s("hWymx"),i=s("7dQGn"),l=s("cIjax"),c=s("jH98U"),u=/*#__PURE__*/(0,a.defineComponent)({__name:"BasicSlotGroup",props:{slotGroupConfig:{}},setup(e,{expose:t}){t();let{slotGroupConfig:r}=e,{getPrimary:o,getSecondary:s}=(0,i.useConfigStore)(),u=o(r.label),d=s(r.label),{slotGroups:p}=(0,l.useSlotGroupsStore)(),m=p.find(({id:e})=>e===r.id);(0,n.strict)(void 0!==m);let f=(0,a.ref)(0);(0,a.watchEffect)(()=>m.parameterTransforms.forEach((e,t)=>e.setActive(f.value>t)));let h={props:e,slotGroupConfig:r,getPrimary:o,getSecondary:s,primaryLabel:u,secondaryLabel:d,slotGroups:p,slotGroup:m,numActive:f,MarkerSlot:c.default};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}})}),l("jH98U",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("zgn46")).__esModule&&(o=o.default),o.render=s("gbmju").render,o.__cssModules={},s("65t20").default(o),o.__scopeId="data-v-c64c16",o.__file="MarkerSlot.vue";var a=o}),l("zgn46",function(e,o){t(e.exports),r(e.exports,"default",function(){return f});var a=s("djimy"),n=s("iNn5Y"),i=s("9OMm5"),l=s("7Rjir"),c=s("7dQGn"),u=s("f4LB1"),d=s("02fmQ"),p=s("fPRSg"),m=s("9QUOw"),f=/*#__PURE__*/(0,a.defineComponent)({__name:"MarkerSlot",props:{slotGroupId:{},primaryLabel:{},secondaryLabel:{},activeUrl:{},inactiveUrl:{},slotConfig:{}},emits:["activate","deactivate"],setup(e,{expose:t,emit:r}){t();let{slotConfig:o}=e,s=(0,a.ref)(e.slotGroupId),f=`${s.value}-${o.id}`,{toAssetUrl:h,extractAssetPosition:g}=(0,c.useConfigStore)(),y=h(e.activeUrl),b=h(e.inactiveUrl),S=g(y),_=g(b),k=(0,u.useAppStore)(),x=(0,d.useMarkerStore)(),{markerPositions:C}=x,P=(0,p.useSlotStore)(),T=new m.Circle(o.x,o.y,l.SLOT_CIRCLE_DIAMETER/2),E=[],M=(0,i.useArrayFilter)(C,e=>T.containsPoint(e));(0,a.watchEffect)(()=>{let e=(0,n.difference)(M.value,E),t=(0,n.difference)(E,M.value);t.forEach(({id:e})=>P.addActivation({slotId:f,markerId:e})),e.forEach(({id:e})=>P.addActivation({slotId:f,markerId:e})),E=M.value});let I=(0,a.computed)(()=>M.value.length>0);(0,a.watch)(()=>I.value,(e,t)=>{e&&!t?r("activate",{slotId:f,slotGroupId:s.value}):r("deactivate",{slotId:f,slotGroupId:s.value})});let R={props:e,slotConfig:o,slotGroupId:s,slotId:f,toAssetUrl:h,extractAssetPosition:g,markerSlotActiveUrl:y,markerSlotInactiveUrl:b,markerSlotActivePosition:S,markerSlotInactivePosition:_,appStore:k,markerStore:x,markerPositions:C,slotStore:P,slotCircle:T,get previousContainedMarkers(){return E},set previousContainedMarkers(v){E=v},containedMarkers:M,isActive:I,emit:r,get SLOT_CIRCLE_DIAMETER(){return l.SLOT_CIRCLE_DIAMETER}};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}})}),l("fPRSg",function(e,t){r(e.exports,"useSlotStore",function(){return n});var o=s("kV0Ly"),a=s("djimy");let n=(0,o.defineStore)("slot",()=>{let e=(0,a.ref)([]),t=t=>{let r=e.value.findIndex(({slotId:e,markerId:r})=>e===t.slotId&&r===t.markerId);-1!==r&&e.value.splice(r,1)};return{slotActivations:(0,a.readonly)(e),addActivation:r=>{t(r),e.value.push(r)},removeActivation:t}})}),l("9QUOw",function(e,t){r(e.exports,"Circle",function(){return o});class o{constructor(e,t,r){this.x=e,this.y=t,this.radius=r}clone(){return new o(this.x,this.y,this.radius)}containsPoint({x:e,y:t}){return(this.x-e)**2+(this.y-t)**2<=this.radius**2}containsCircle(e,t=0){let r=Math.sqrt((this.x-e.x)**2+(this.y-e.y)**2);return r+e.radius<=this.radius+t}static toCircumcircle(e){let t=e.x+e.width/2,r=e.y+e.height/2,a=Math.sqrt(e.width**2+e.height**2)/2;return new o(t,r,a)}static toIncircle(e){let t=e.x+e.width/2,r=e.y+e.height/2,a=Math.min(e.width,e.height)/2;return new o(t,r,a)}}}),l("gbmju",function(e,t){r(e.exports,"render",function(){return h});var o,a=s("djimy");let n=["data-slot-id"],i={class:"asset-container"},l=["src","alt"],c=["src","alt"],u={key:1,class:"label"},d={class:"primary-text"},p={class:"secondary-text"},m={key:2,class:"dev-label"},f=(o=()=>/*#__PURE__*/(0,a.createElementVNode)("br",null,null,-1),(0,a.pushScopeId)("data-v-c64c16"),o=o(),(0,a.popScopeId)(),o);function h(e,t,r,o,s,h){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{"data-slot-id":o.slotConfig.id,class:"slot",style:(0,a.normalizeStyle)({"--slot-x":o.slotConfig.x,"--slot-y":o.slotConfig.y,"--slot-angle":`${o.slotConfig.angle}deg`,"--slot-diameter":o.SLOT_CIRCLE_DIAMETER})},[(0,a.createElementVNode)("div",i,[(0,a.withDirectives)((0,a.createElementVNode)("img",{src:o.markerSlotActiveUrl.href,alt:`${o.slotConfig.id}-active`,style:(0,a.normalizeStyle)({"--asset-x":o.markerSlotActivePosition.x,"--asset-y":o.markerSlotActivePosition.y})},null,12,l),[[a.vShow,o.isActive]]),(0,a.withDirectives)((0,a.createElementVNode)("img",{src:o.markerSlotInactiveUrl.href,alt:`${o.slotConfig.id}-inactive`,style:(0,a.normalizeStyle)({"--asset-x":o.markerSlotInactivePosition.x,"--asset-y":o.markerSlotInactivePosition.y})},null,12,c),[[a.vShow,!o.isActive]])]),o.appStore.isDeveloperModeActive?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:(0,a.normalizeClass)(["circle",{active:o.isActive,inactive:!o.isActive}])},null,2)):(0,a.createCommentVNode)("",!0),o.appStore.showMarkerSlotLabels?((0,a.openBlock)(),(0,a.createElementBlock)("div",u,[(0,a.createElementVNode)("div",d,(0,a.toDisplayString)(o.props.primaryLabel),1),(0,a.createElementVNode)("div",p,(0,a.toDisplayString)(o.props.secondaryLabel),1)])):(0,a.createCommentVNode)("",!0),o.appStore.isDeveloperModeActive?((0,a.openBlock)(),(0,a.createElementBlock)("div",m,[(0,a.createTextVNode)((0,a.toDisplayString)(o.slotGroupId),1),f,(0,a.createTextVNode)((0,a.toDisplayString)(o.slotConfig.id),1)])):(0,a.createCommentVNode)("",!0)],12,n)}}),l("65t20",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("jtxJg",function(e,t){r(e.exports,"render",function(){return n});var o=s("djimy");let a=["data-slot-group-id"];function n(e,t,r,n,i,s){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{"data-slot-group-id":n.slotGroupConfig.id},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(n.slotGroupConfig.slots,e=>((0,o.openBlock)(),(0,o.createBlock)(n.MarkerSlot,{key:e.id,"slot-group-id":n.slotGroupConfig.id,"primary-label":n.primaryLabel,"secondary-label":n.secondaryLabel,"active-url":n.slotGroupConfig.assets.markerSlotActive.url,"inactive-url":n.slotGroupConfig.assets.markerSlotInactive.url,"slot-config":e,onActivate:t[0]||(t[0]=e=>n.numActive+=1),onDeactivate:t[1]||(t[1]=e=>n.numActive-=1)},null,8,["slot-group-id","primary-label","secondary-label","active-url","inactive-url","slot-config"]))),128))],8,a)}}),l("eESbR",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("1VbKL",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("hD1de")).__esModule&&(o=o.default),o.render=s("cqowQ").render,s("eT2xs").default(o),o.__scopeId="data-v-5f73e3",o.__file="ActionCardSlotGroup.vue";var a=o}),l("hD1de",function(e,o){t(e.exports),r(e.exports,"default",function(){return d});var a=s("djimy"),n=s("hWymx"),i=s("7dQGn"),l=s("cIjax"),c=s("jH98U"),u=s("7RdUk"),d=/*#__PURE__*/(0,a.defineComponent)({__name:"ActionCardSlotGroup",props:{slotGroupConfig:{}},setup(e,{expose:t}){t();let{slotGroupConfig:r}=e,{config:{general:{primaryLanguage:o,secondaryLanguage:s},interaction:{actionCardDelayMs:d}}}=(0,i.useConfigStore)(),{getPrimary:p,getSecondary:m}=(0,i.useConfigStore)(),f=p(r.label),h=m(r.label),{slotGroups:g}=(0,l.useSlotGroupsStore)(),y=g.find(({id:e})=>e===r.id);(0,n.strict)(void 0!==y);let b=r.slots.map(e=>({slotConfig:e,assignment:(0,a.ref)(null),active:(0,a.ref)(!1),timeout:null})),S=r.cards.map(e=>{let t=y.parameterTransforms.find(t=>t.id===e.parameterTransformId);return(0,n.strict)(void 0!==t),{cardConfig:e,state:t}});b.forEach(e=>{(0,a.watch)(e.active,t=>{let{assignment:r}=e;if(t){if(null!==r.value){let{state:t}=r.value;console.log(t),console.log(`Activating ${t.id} at action card slot ${e.slotConfig.cardSlot.id}`),t.setActive(!0)}}else{if(null!==r.value){let t=r.value,{state:o}=t;console.log(`Deactivating ${o.id} at action card slot ${e.slotConfig.cardSlot.id}`),t.state.setActive(!1),console.log(`Removing ${t.state.id} from action card slot ${e.slotConfig.cardSlot.id}`),e.assignment.value=null,S.push(t)}null===e.timeout&&(e.timeout=setTimeout(()=>{e.timeout=null;let t=S.shift();(0,n.strict)(void 0!==t),console.log(`Assigning ${t.state.id} to action card slot ${e.slotConfig.cardSlot.id}`),r.value=t,r.value.state.setActive(e.active.value)},d))}},{immediate:!0})});let _={props:e,slotGroupConfig:r,primaryLanguage:o,secondaryLanguage:s,actionCardDelayMs:d,getPrimary:p,getSecondary:m,primaryLabel:f,secondaryLabel:h,slotGroups:g,slotGroup:y,slotsWithCard:b,availableCardAssignments:S,MarkerSlot:c.default,CardSlot:u.default};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}})}),l("7RdUk",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("afxwH")).__esModule&&(o=o.default),o.render=s("l66cW").render,o.__cssModules={},s("4GRYL").default(o),o.__scopeId="data-v-d849c7",o.__file="CardSlot.vue";var a=o}),l("afxwH",function(e,o){t(e.exports),r(e.exports,"default",function(){return l});var a=s("djimy"),n=s("f4LB1"),i=s("7lUOB"),l=/*#__PURE__*/(0,a.defineComponent)({__name:"CardSlot",props:{cardSlotConfig:{},cardConfig:{},active:{type:Boolean}},setup(e,{expose:t}){t();let r=(0,n.useAppStore)(),o={props:e,appStore:r,GameCard:i.default};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}})}),l("7lUOB",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("7xQxQ")).__esModule&&(o=o.default),o.render=s("05aqY").render,o.__cssModules={},s("a3cWG").default(o),o.__scopeId="data-v-f18a87",o.__file="GameCard.vue";var a=o}),l("7xQxQ",function(e,o){t(e.exports),r(e.exports,"default",function(){return l});var a=s("djimy"),n=s("7dQGn"),i=s("f4LB1"),l=/*#__PURE__*/(0,a.defineComponent)({__name:"GameCard",props:{url:{},label:{},active:{type:Boolean}},setup(e,{expose:t}){t();let{toAssetUrl:r,extractAssetPosition:o}=(0,n.useConfigStore)(),s=(0,i.useAppStore)(),l=(0,a.computed)(()=>r(e.url)),c={props:e,toAssetUrl:r,extractAssetPosition:o,appStore:s,assetUrl:l,position:{x:0,y:0}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}})}),l("05aqY",function(e,t){r(e.exports,"render",function(){return l});var o=s("djimy");let a=["src","alt"],n={key:0,class:"label"},i={class:"highlight"};function l(e,t,r,s,l,c){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["action-card",{active:s.props.active}]),style:(0,o.normalizeStyle)({"--card-x":s.position.x,"--card-y":s.position.y})},[(0,o.createElementVNode)("img",{src:s.assetUrl.href,alt:r.label,class:"image"},null,8,a),s.appStore.isDeveloperModeActive?((0,o.openBlock)(),(0,o.createElementBlock)("div",n,[(0,o.createElementVNode)("span",i,(0,o.toDisplayString)(r.label),1)])):(0,o.createCommentVNode)("",!0)],6)}}),l("a3cWG",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("l66cW",function(e,t){r(e.exports,"render",function(){return n});var o=s("djimy");let a={key:0,class:"label"};function n(e,t,r,n,i,s){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{style:(0,o.normalizeStyle)({"--card-x":r.cardSlotConfig.x,"--card-y":r.cardSlotConfig.y,"--card-angle":r.cardSlotConfig.angle}),class:(0,o.normalizeClass)(["card-slot",{"dev-mode":n.appStore.isDeveloperModeActive}])},[n.appStore.isDeveloperModeActive?((0,o.openBlock)(),(0,o.createElementBlock)("div",a,(0,o.toDisplayString)(r.cardSlotConfig.id),1)):(0,o.createCommentVNode)("",!0),null!==r.cardConfig?((0,o.openBlock)(),(0,o.createBlock)(n.GameCard,{key:1,url:r.cardConfig.url,label:r.cardConfig.parameterTransformId,active:n.props.active},null,8,["url","label","active"])):(0,o.createCommentVNode)("",!0)],6)}}),l("4GRYL",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("cqowQ",function(e,t){r(e.exports,"render",function(){return n});var o=s("djimy");let a=["data-slot-group-id"];function n(e,t,r,n,i,s){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{"data-slot-group-id":n.slotGroupConfig.id},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(n.slotsWithCard,e=>((0,o.openBlock)(),(0,o.createBlock)(n.CardSlot,{key:e.slotConfig.cardSlot.id,"card-slot-config":e.slotConfig.cardSlot,"card-config":e.assignment.value?.cardConfig??null,active:e.assignment.value?.state?.active??!1},null,8,["card-slot-config","card-config","active"]))),128)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(n.slotsWithCard,e=>((0,o.openBlock)(),(0,o.createBlock)(n.MarkerSlot,{key:e.slotConfig.markerSlot.id,"slot-group-id":n.slotGroupConfig.id,"primary-label":n.primaryLabel,"secondary-label":n.secondaryLabel,"active-url":n.slotGroupConfig.assets.markerSlotActive.url,"inactive-url":n.slotGroupConfig.assets.markerSlotInactive.url,"slot-config":e.slotConfig.markerSlot,onActivate:t=>e.active.value=!0,onDeactivate:t=>e.active.value=!1},null,8,["slot-group-id","primary-label","secondary-label","active-url","inactive-url","slot-config","onActivate","onDeactivate"]))),128))],8,a)}}),l("eT2xs",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("jrojO",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("caiBL")).__esModule&&(o=o.default),o.render=s("jZwyy").render,s("hZr9M").default(o),o.__scopeId="data-v-0678b6",o.__file="EventCardSlotGroup.vue";var a=o}),l("caiBL",function(e,o){t(e.exports),r(e.exports,"default",function(){return d});var a=s("djimy"),n=s("hWymx"),i=s("cIjax"),l=s("jH98U"),c=s("llWLg"),u=s("7dQGn"),d=/*#__PURE__*/(0,a.defineComponent)({__name:"EventCardSlotGroup",props:{slotGroupConfig:{}},setup(e,{expose:t}){t();let{slotGroupConfig:r}=e,{markerSlot:o}=r,{slotGroups:s}=(0,i.useSlotGroupsStore)(),d=s.find(({id:e})=>e===r.id);(0,n.strict)(void 0!==d);let p=(0,a.ref)(!1),{getPrimary:m,getSecondary:f}=(0,u.useConfigStore)(),h=m(r.label),g=f(r.label),y={props:e,slotGroupConfig:r,markerSlotConfig:o,slotGroups:s,slotGroup:d,isMarkerSlotActive:p,getPrimary:m,getSecondary:f,primaryLabel:h,secondaryLabel:g,MarkerSlot:l.default,EventCardCycler:c.default};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}})}),l("llWLg",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("dIE4t")).__esModule&&(o=o.default),o.render=s("9hTqD").render,s("9NrRY").default(o),o.__scopeId="data-v-5ce7e8",o.__file="EventCardCycler.vue";var a=o}),l("dIE4t",function(e,o){t(e.exports),r(e.exports,"default",function(){return d});var a=s("djimy"),n=s("hWymx"),i=s("9OMm5"),l=s("7dQGn"),c=s("cIjax"),u=s("7RdUk"),d=/*#__PURE__*/(0,a.defineComponent)({__name:"EventCardCycler",props:{slotGroupConfig:{},enabled:{type:Boolean}},setup(e,{expose:t}){t();let{config:{interaction:{eventCardMinDelayMs:r,eventCardMaxDelayMs:o,eventCardMinDurationMs:s,eventCardMaxDurationMs:d}}}=(0,l.useConfigStore)(),{slotGroups:p}=(0,c.useSlotGroupsStore)(),m=p.find(({id:t})=>t===e.slotGroupConfig.id);(0,n.strict)(void 0!==m);let f=(e=1)=>e*r+Math.random()*Math.abs(o-r),h=()=>s+Math.random()*Math.abs(d-s),g=(0,a.reactive)(e.slotGroupConfig.cardSlots.map(e=>({cardSlotConfig:e,cardConfig:null,deactivateCard:()=>{},stopFilling:()=>{}})));(0,n.strict)(g.length>0),(0,n.strict)(e.slotGroupConfig.cards.length>0),(0,n.strict)(g.length<=e.slotGroupConfig.cards.length);let y=e.slotGroupConfig.cards.map(e=>{let t=m.parameterTransforms.find(t=>t.id===e.parameterTransformId);return(0,n.strict)(void 0!==t),{cardConfig:e,parameterTransform:t}}),b=()=>{let e=y.shift();return(0,n.strict)(void 0!==e),y.push(e),e},S=e=>{e.deactivateCard(),e.stopFilling();let{cardConfig:t,parameterTransform:r}=b();e.cardConfig=t,r.active=!0;let o=h(),a=f();e.stopFilling(),e.stopFilling=(0,i.useTimeoutFn)(()=>S(e),o+a).stop;let n=(0,i.useTimeoutFn)(()=>e.deactivateCard(),o).stop;e.deactivateCard=()=>{n(),e.cardConfig=null,r.active=!1,e.deactivateCard=()=>{}}},_=()=>{let e=0;g.forEach(t=>{if(null===t.cardConfig){let r=0===e?0:f(e);t.stopFilling(),t.stopFilling=(0,i.useTimeoutFn)(()=>S(t),r).stop,e+=1}})},k=()=>{g.forEach(e=>{e.deactivateCard(),e.stopFilling()})};(0,a.watch)(()=>e.enabled,(e,t)=>{e!==t&&(e?_():k())},{immediate:!0});let x={props:e,eventCardMinDelayMs:r,eventCardMaxDelayMs:o,eventCardMinDurationMs:s,eventCardMaxDurationMs:d,slotGroups:p,slotGroup:m,getRandomDelayMs:f,getRandomDurationMs:h,cardSlotAssignments:g,eventCardPriorityQueue:y,getNextEventCard:b,fillCardSlot:S,activateCardSlotAssignments:_,deactivateCardSlotAssignments:k,CardSlot:u.default};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}})}),l("9hTqD",function(e,t){r(e.exports,"render",function(){return a});var o=s("djimy");function a(e,t,r,a,n,i){return(0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.cardSlotAssignments,e=>((0,o.openBlock)(),(0,o.createBlock)(a.CardSlot,{key:e.cardSlotConfig.id,"card-slot-config":e.cardSlotConfig,"card-config":e.cardConfig,active:!0},null,8,["card-slot-config","card-config"]))),128)}}),l("9NrRY",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("jZwyy",function(e,t){r(e.exports,"render",function(){return n});var o=s("djimy");let a=["data-slot-group-id"];function n(e,t,r,n,i,s){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{"data-slot-group-id":n.slotGroupConfig.id},[(0,o.createVNode)(n.EventCardCycler,{"slot-group-config":n.slotGroupConfig,enabled:n.isMarkerSlotActive},null,8,["slot-group-config","enabled"]),(0,o.createVNode)(n.MarkerSlot,{"slot-group-id":n.slotGroupConfig.id,"primary-label":n.primaryLabel,"secondary-label":n.secondaryLabel,"slot-config":n.markerSlotConfig,"active-url":n.slotGroupConfig.assets.markerSlotActive.url,"inactive-url":n.slotGroupConfig.assets.markerSlotInactive.url,onActivate:t[0]||(t[0]=e=>n.isMarkerSlotActive=!0),onDeactivate:t[1]||(t[1]=e=>n.isMarkerSlotActive=!1)},null,8,["slot-group-id","primary-label","secondary-label","slot-config","active-url","inactive-url"])],8,a)}}),l("hZr9M",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("kIEuR",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("Q9FY0")).__esModule&&(o=o.default),o.render=s("jhXpM").render,o.__cssModules={},s("8Gk17").default(o),o.__scopeId="data-v-b9d3e8",o.__file="ModelVisualization.vue";var a=o}),l("Q9FY0",function(e,a){t(e.exports),r(e.exports,"default",function(){return k});var n=s("djimy"),i=s("hWymx"),l=s("lOERq"),c=s("gkhY4"),u=s("9OMm5"),d=s("gK2p2"),p=s("7Rjir"),m=s("f4LB1"),f=s("i5N9G"),h=s("5f8hv"),g=s("aDsGb"),y=s("aXhH2"),b=s("jcDd5"),S=s("etm9Z"),_=s("kV0Ly"),k=/*#__PURE__*/(0,n.defineComponent)({__name:"ModelVisualization",setup(e,{expose:t}){let r=new URL(s("9I5ug")),a=(0,d.default)(),k=["abandon","acquireNewlyProduced","acquireRefurbished","acquireRepaired","acquireUsed","disposeBroken","disposeHibernating","goBroken","landfill","produceFromNaturalResources","produceFromRecycledMaterials","recycle","refurbish","repair"],x=["recycledMaterials","repairedPhones","refurbishedPhones","newlyProducedPhones","phonesInUse"],C=["recycledMaterials","hibernatingPhones","disposedPhones","brokenPhones","repairedPhones","refurbishedPhones","newlyProducedPhones"],P=["phonesInUse"],T={abandon:1,acquireNewlyProduced:-1,acquireRefurbished:-1,acquireRepaired:-1,acquireUsed:-1,disposeBroken:-1,disposeHibernating:-1,goBroken:-1,landfill:-1,produceFromNaturalResources:-1,produceFromRecycledMaterials:-1,recycle:-1,refurbish:-1,repair:-1},E=(0,y.loadSvg)(r),M=(0,m.useAppStore)(),I=(0,f.useModelStore)(),R=(0,h.useVisualizationStore)(),{scaleFactors:O}=(0,_.storeToRefs)(R),w=(0,n.ref)({deltaMs:0,stepSize:0,flowVizScale:1,stockVizScale:1,record:I.record}),N=e=>{let t=(0,n.computed)(()=>{let{record:t}=w.value,{stocks:r}=t,o=r[e],a=w.value.stockVizScale;return Math.sqrt(o*a/Math.PI)});return{radius:t}},B=e=>{let t=0,r=(0,n.computed)(()=>{let{deltaMs:r,flowVizScale:o,record:a}=w.value,{flows:n}=a,i=n[e],s=T[e],l=(Number.isNaN(t)?0:t)+s*Math.min(r*o*i,10);return t=l,l});return{dashoffset:r}},A=e=>{let t=w.value.record.flows[e],r=(0,n.computed)(()=>{let{flowVizScale:r,record:o,stepSize:a}=w.value,n=o.flows[e],i=(n-t)/a,s=O.value.flowHighlight*r*i,l=.5*(1+Math.min(Math.max(Math.sign(s)*Math.sqrt(Math.abs(s)),-1),1));return t=n,M.highlightDerivatives&&!Number.isNaN(l)?l:.5});return{highlight:r}},D=e=>k.map(t=>{let r=(0,S.guardedQuerySelector)(SVGGeometryElement,`#${/*@__PURE__*/o(l)(t)}`,e),a=r.getAttribute("d");(0,i.strict)(null!==a,`SVG path for flow ${t} not found.`);let n=(0,u.toReactive)({id:t,svgPath:a,dashOffset:B(t).dashoffset,highlight:A(t).highlight});return n}),j=(e,t)=>{let r="supply"===t?C:"capacity"===t?x:P;return r.map(r=>{let a=(0,S.guardedQuerySelector)(SVGGeometryElement,`#${/*@__PURE__*/o(l)(r)}`,e);(0,i.strict)("circle"===a.tagName);let{x:n,y:s}=(0,b.getCircleCenter)(a),d="verbatim"===t?r:/*@__PURE__*/o(c)(`${t}-of-${/*@__PURE__*/o(l)(r)}`);(0,i.strict)((0,g.stockIds).includes(d),`${d} is no valid stockId (${(0,g.stockIds).join(", ")})`);let p=(0,u.toReactive)({id:d,x:n,y:s,radius:N(d).radius,highlight:0});return p})},V=(0,n.ref)([]),L=(0,n.ref)([]),F=(0,n.ref)([]),G=(0,n.ref)([]),U=(0,n.ref)([]);(0,n.onMounted)(()=>{E.then(e=>{F.value.push(...D(e)),V.value.push(...j(e,"capacity")),L.value.push(...j(e,"supply"),...j(e,"verbatim"))})});let q=(e,t,r)=>{let o=O.value.flow/r.parameters.numberOfUsers,a=O.value.stock/r.parameters.numberOfUsers;w.value={deltaMs:e,stepSize:t,flowVizScale:o,stockVizScale:a,record:r}};t({update:q});let H={svgUrl:r,uuid:a,mainFlowIds:k,mainCapacityIds:x,mainSupplyIds:C,additionalVerbatimSupplyIds:P,flowVizSigns:T,svgPromise:E,appStore:M,modelStore:I,visualizationStore:R,scaleFactors:O,updateInfo:w,useStockToRadius:N,useFlowToDashoffset:B,useFlowToHighlight:A,extractFlowDescriptions:D,extractStockDescriptions:j,capacityDescriptions:V,supplyDescriptions:L,flowDescriptions:F,flowElements:G,supplyElements:U,update:q,get BOARD_WIDTH(){return p.BOARD_WIDTH},get BOARD_HEIGHT(){return p.BOARD_HEIGHT}};return Object.defineProperty(H,"__isScriptSetup",{enumerable:!1,value:!0}),H}})}),l("aXhH2",function(e,t){r(e.exports,"loadSvg",function(){return o});/**
 * Loads an external SVG file and returns the DOM tree of its first <svg> element.
 *
 * @param {string|URL} uri
 * @param {boolean} clearStyles
 *  If true removes the style elements from the file
 * @return {Promise<SVGSVGElement>}
 */async function o(e,t=!0){let r=await fetch(e);if(r.status<200||r.status>=300)throw Error(`Server returned status ${r.status} (${r.statusText}) loading ${new URL(e).href}.`);let o=await r.text(),a=document.createElement("div");a.innerHTML=o;let n=a.querySelector("svg");if(null===n)throw Error(`No SVG element found in ${new URL(e).href}.`);return t&&n.querySelectorAll("style")?.forEach(e=>e.remove()),n}}),l("jcDd5",function(e,t){r(e.exports,"getCircleCenter",function(){return a});var o=s("hWymx");function a(e){let t=parseFloat(e.getAttribute("cx")??"");(0,o.strict)(!Number.isNaN(t));let r=parseFloat(e.getAttribute("cy")??"");return(0,o.strict)(!Number.isNaN(r)),{x:t,y:r}}}),l("etm9Z",function(e,t){r(e.exports,"guardedQuerySelector",function(){return o});function o(e,t,r=document){let o=r.querySelector(t);if(null===o)throw Error(`No element found matching selector ${t}.`);if(!(o instanceof e))throw Error(`Element matching selector ${t} has the wrong type.`);return o}}),l("9I5ug",function(e,t){e.exports=s("5CpQN").getBundleURL("6xGL6")+"model.08756a01.svg"}),l("jhXpM",function(e,t){r(e.exports,"render",function(){return d});var o=s("djimy");let a=["width","height","viewBox"],n=["id","data-label","d","stroke-dashoffset"],i=["cx","cy","r"],l=["id","data-label","cx","cy","r"],c=["xlink:href"],u=["x","y"];function d(e,t,r,s,d,p){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{ref:"container",class:"model-viz-container",style:(0,o.normalizeStyle)({"--dev-mode-label-display":s.appStore.isDeveloperModeActive?"inline":"none"})},[((0,o.openBlock)(),(0,o.createElementBlock)("svg",{width:s.BOARD_WIDTH,height:s.BOARD_HEIGHT,viewBox:`0 0 ${s.BOARD_WIDTH} ${s.BOARD_HEIGHT}`,"xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg",class:"model-visualization"},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.flowDescriptions,e=>((0,o.openBlock)(),(0,o.createElementBlock)("path",{key:e.id,id:`${e.id}-${s.uuid}`,ref_for:!0,ref:"flowElements","data-label":e.id,d:e.svgPath,"stroke-dashoffset":e.dashOffset,class:"flow anim-edge",style:(0,o.normalizeStyle)({"--highlight":e.highlight})},null,12,n))),128)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.capacityDescriptions,e=>((0,o.openBlock)(),(0,o.createElementBlock)("circle",{key:e.id,cx:e.x,cy:e.y,r:e.radius,class:"stock capacity"},null,8,i))),128)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.supplyDescriptions,e=>((0,o.openBlock)(),(0,o.createElementBlock)("circle",{key:e.id,id:`${e.id}-${s.uuid}`,ref_for:!0,ref:"supplyElements","data-label":e.id,cx:e.x,cy:e.y,r:e.radius,class:"stock supply"},null,8,l))),128)),s.appStore.isDeveloperModeActive?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.flowElements,e=>((0,o.openBlock)(),(0,o.createElementBlock)("text",{key:e.id},[(0,o.createElementVNode)("textPath",{"xlink:href":`#${e.id}`,startOffset:"50%","text-anchor":"middle","dominant-baseline":"middle",class:"label"},(0,o.toDisplayString)(e.dataset.label),9,c)]))),128)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.supplyElements,e=>((0,o.openBlock)(),(0,o.createElementBlock)("text",{key:e.id,x:e.getAttribute("cx"),y:e.getAttribute("cy"),class:"label"},(0,o.toDisplayString)(e.dataset.label),9,u))),128))],64)):(0,o.createCommentVNode)("",!0)],8,a))],4)}}),l("8Gk17",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("5RKs2",function(e,t){let o;r(e.exports,"default",function(){return a}),(o=s("8wLpO")).__esModule&&(o=o.default),o.render=s("dFh5r").render,o.__cssModules={},s("lO3hs").default(o),o.__scopeId="data-v-80321f",o.__file="ResetTimeoutOverlay.vue";var a=o}),l("8wLpO",function(e,o){t(e.exports),r(e.exports,"default",function(){return u});var a=s("djimy"),n=s("9OMm5"),i=s("7dQGn"),l=s("i5N9G"),c=s("8CFAD"),u=/*#__PURE__*/(0,a.defineComponent)({__name:"ResetTimeoutOverlay",setup(e,{expose:t}){t();let{config:r,getPrimary:o,getSecondary:s}=(0,i.useConfigStore)(),{autoReset:u}=r.general,d=(0,l.useModelStore)(),p=(0,a.ref)(-1),m=(0,c.compile)(u.condition),f=()=>{},h=()=>{};function g(){f=(0,a.watch)(d.record,e=>{m(e)&&(f(),p.value=Math.round(u.timeoutSeconds),h=(0,n.useIntervalFn)(()=>{switch(p.value-=1,p.value){case 0:d.reset();break;case -1:h(),g()}}).pause)})}(0,a.onMounted)(g),(0,a.onUnmounted)(()=>{f(),h(),p.value=-1});let y={config:r,getPrimary:o,getSecondary:s,autoResetConfig:u,modelStore:d,remainingSeconds:p,resetCondition:m,get unwatch(){return f},set unwatch(v){f=v},get stopCountdown(){return h},set stopCountdown(v){h=v},watchModel:g};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}})}),l("dFh5r",function(e,t){r(e.exports,"render",function(){return p});var o=s("djimy");let a={class:"title"},n={class:"primary-text"},i={class:"secondary-text"},l={class:"countdown"},c={class:"description"},u={class:"primary-text"},d={class:"secondary-text"};function p(e,t,r,s,p,m){return s.remainingSeconds>-1?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["reset-timeout-panel",{"fade-in":s.remainingSeconds>0,"fade-out":s.remainingSeconds<=0}])},[(0,o.createElementVNode)("div",a,[(0,o.createElementVNode)("div",n,(0,o.toDisplayString)(s.getPrimary(s.autoResetConfig.title).value),1),(0,o.createElementVNode)("div",i,(0,o.toDisplayString)(s.getSecondary(s.autoResetConfig.title).value),1)]),(0,o.createElementVNode)("div",l,(0,o.toDisplayString)(Math.max(0,s.remainingSeconds)),1),(0,o.createElementVNode)("div",c,[(0,o.createElementVNode)("div",u,(0,o.toDisplayString)(s.getPrimary(s.autoResetConfig.description).value),1),(0,o.createElementVNode)("div",d,(0,o.toDisplayString)(s.getSecondary(s.autoResetConfig.description).value),1)])],2)):(0,o.createCommentVNode)("",!0)}}),l("lO3hs",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}}),l("8C4qt",function(e,t){r(e.exports,"ignorePromise",function(){return o});function o(e){}}),l("6h466",function(e,t){r(e.exports,"ModelSimulator",function(){return o});class o{constructor(e,t,r,o,a,n){this.model=e,this.parameters=r,this.flowPerStockCache=null,this.record=this.model.evaluate(t,r,o),this.deltaPerSecond=a,this.maxStepSize=n,this.flowEvaluator=this.model.createFlowEvaluator(r),this.flowEvaluatorWithCache=this.evaluateFlowPerStockWithCache.bind(this)}evaluateFlowPerStockWithCache(e,t){return null!==this.flowPerStockCache&&this.flowPerStockCache.t===t?[...this.flowPerStockCache.value]:this.flowEvaluator(e,t)}tick(e){let t=this.record.t+e*this.deltaPerSecond;for(;this.record.t<t;){let e=Math.min(this.maxStepSize,t-this.record.t);this.step(e)}return this.record}step(e){let{stocks:t,parameters:r,t:o}=this.record,a=this.model.step(t,o,e,this.flowEvaluatorWithCache),n=this.model.evaluate(a,r,o+e);return this.flowPerStockCache={t:n.t,value:this.model.stocksToStockArray(this.model.accumulateFlowsPerStock(n.flows))},this.record=n,n}}}),l("9cXwb",function(e,t){r(e.exports,"Runner",function(){return l});var o=s("3ZGF0"),a=s("hWymx"),n=s("8C4qt");function i(){let e=document.timeline?.currentTime;return null==e?performance.now():"number"==typeof e?e:e.to("ms").value}class l extends o.EventEmitter{play(){this.shouldRun=!0,(0,n.ignorePromise)(this.run())}pause(){this.shouldRun=!1,null!==this.cancelAnimationFrameCallback&&this.cancelAnimationFrameCallback()}isPlaying(){return this.running}isPaused(){return!this.running}shouldPlay(){return this.shouldRun}shouldPause(){return!this.shouldRun}togglePlayPause(){this.shouldRun?this.pause():this.play()}tick(){this.isPlaying()?((0,a.strict)(null!==this.cancelAnimationFrameCallback),this.cancelAnimationFrameCallback()):(this.play(),this.pause())}async run(){if(this.running||!this.shouldRun)return;this.running=!0,this.emit("play");// Keep track of the offset between this runner and the global animation time.
// The offset increases by the time the runner was paused.
let e=i();this.timeStampOffset+=e-this.lastTimeStamp,// The first tick will be emitted with a delta of 0, i.e. the attached listeners should not progress.
// If renderers are attached, they should just render the current state.
this.lastTimeStamp=e;do{let t=e-this.lastTimeStamp;// Account for the case where the runner has been paused during the tick event
if(this.emit("tick",t,e,this.lastTimeStamp,this.timeStampOffset),this.lastTimeStamp=e,!this.shouldRun)break;try{// Wait for the next animation frame
// eslint-disable-next-line no-await-in-loop
e=await new Promise((e,t)=>{let r=requestAnimationFrame(e);this.cancelAnimationFrameCallback=()=>{cancelAnimationFrame(r),this.cancelAnimationFrameCallback=null,this.shouldRun?e(i()):t()}})}catch(e){// The runner was paused while waiting for the next animation frame
}}while(this.shouldRun)this.running=!1,this.emit("pause")}constructor(...e){super(...e),this.shouldRun=!1,this.running=!1,this.timeStampOffset=0,this.lastTimeStamp=i(),this.cancelAnimationFrameCallback=null}}}),l("k5vMz",function(e,t){r(e.exports,"render",function(){return i});var o=s("djimy");let a={class:"slot-panel abs-top-left"},n={class:"marker-panel abs-top-left"};function i(e,t,r,i,s,l){return(0,o.openBlock)(),(0,o.createBlock)(i.ScaledLetterBox,{"target-size":{width:i.BOARD_WIDTH,height:i.BOARD_HEIGHT},class:"scaled-letterbox",onResize:t[1]||(t[1]=e=>i.appStore.scale=e)},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("div",{class:"layer-panel abs-top-left",style:(0,o.normalizeStyle)({"--app-width":i.BOARD_WIDTH,"--app-height":i.BOARD_HEIGHT})},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(i.config.layers,e=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,["modelVisualization"===e?((0,o.openBlock)(),(0,o.createBlock)(i.ModelVisualization,{key:0,ref_for:!0,ref:"modelVisualizations",class:"model-visualization"},null,512)):(0,o.createCommentVNode)("",!0),"modelVisualization"!==e?((0,o.openBlock)(),(0,o.createBlock)(i.ConditionalLayer,{key:1,"layer-config":e},null,8,["layer-config"])):(0,o.createCommentVNode)("",!0)],64))),256)),(0,o.createVNode)(i.ScoreTable,{class:"score-top-left"}),(0,o.createVNode)(i.ScoreTable,{class:"score-bottom-right"})],4),(0,o.createElementVNode)("div",a,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(i.config.interaction.slotGroups,e=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:e.id},["basic"===e.type?((0,o.openBlock)(),(0,o.createBlock)(i.BasicSlotGroup,{key:0,"slot-group-config":e},null,8,["slot-group-config"])):(0,o.createCommentVNode)("",!0),"action-card"===e.type?((0,o.openBlock)(),(0,o.createBlock)(i.ActionCardSlotGroup,{key:1,"slot-group-config":e},null,8,["slot-group-config"])):(0,o.createCommentVNode)("",!0),"event-card"===e.type?((0,o.openBlock)(),(0,o.createBlock)(i.EventCardSlotGroup,{key:2,"slot-group-config":e},null,8,["slot-group-config"])):(0,o.createCommentVNode)("",!0)],64))),128))]),(0,o.createElementVNode)("div",n,[i.options.usePointerMarkers?((0,o.openBlock)(),(0,o.createBlock)(i.PointerMarkerPanel,{key:0})):(0,o.createCommentVNode)("",!0),i.options.useTuioMarkers?((0,o.openBlock)(),(0,o.createBlock)(i.TuioMarkerPanel,{key:1,class:"pointer-events-fallthrough"})):(0,o.createCommentVNode)("",!0)]),i.appStore.autoReset?((0,o.openBlock)(),(0,o.createBlock)(i.ResetTimeoutOverlay,{key:0})):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(i.ControlPanel,{onKeydown:t[0]||(t[0]=e=>e.stopPropagation()),disabled:!i.enableControlPanel},null,8,["disabled"])]),_:1},8,["target-size"])}}),l("feskM",function(e,t){r(e.exports,"default",function(){return o});var o=e=>{}});var c=s("djimy"),u=s("kV0Ly");s("5jyqD").Tab,(e=s("fkeW0")).__esModule&&(e=e.default),e.render=s("k5vMz").render,e.__cssModules={},s("feskM").default(e),e.__scopeId="data-v-6cf05b",e.__file="App.vue";var d=e,p=s("coVQp");async function m(){return new Promise(e=>{let t=document.readyState;("complete"===t||"interactive"===t)&&setTimeout(e,0),document.addEventListener("DOMContentLoaded",()=>e())})}var f=s("7Rjir");async function h(){let e=await (0,p.ConfigLoader).safeLoad(...f.CONFIG_URLS);if(!e.ok){let{config:t,error:{errors:r,explanation:o}}=e.error;throw console.error("Invalid configuration:",t),console.error(o),console.error("Issues reported by the configuration validator:",...r??[]),Error("Error loading configuration. See console for details.")}let t=e.data;console.log(t);let r=(0,u.createPinia)(),o=(0,c.createApp)(d);o.provide(f.CONFIG_INJECTION_KEY,t),o.use(r);let a=o.mount(document.body);return{app:a}}// This is for setting global Vue.js option that should actually be set by the bundler, but aren't.
/* eslint-disable */// @ts-ignore
globalThis.__VUE_OPTIONS_API__=!0,// @ts-ignore
globalThis.__VUE_PROD_DEVTOOLS__=!0,// @ts-ignore
globalThis.__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!0,window.circularEconomy=m().then(h)}();//# sourceMappingURL=index.4241666e.js.map

//# sourceMappingURL=index.4241666e.js.map
